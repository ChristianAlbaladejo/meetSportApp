{"version":3,"sources":["./src/app/people/people.page.html","./src/app/people/people-routing.module.ts","./src/app/people/people.module.ts","./src/app/people/people.page.scss","./src/app/people/people.page.ts"],"names":[],"mappings":"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","file":"people-people-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar color=\\\"success\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>People</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n  <ion-list>\\n    <ion-list-header>\\n      People\\n    </ion-list-header>\\n\\n    <ion-item *ngFor=\\\"let user of users\\\" >\\n      <ion-avatar slot=\\\"start\\\">\\n        <img (click)=\\\"loadUser(user)\\\" *ngIf=\\\"user.image\\\" src=\\\"{{url + '/get-image-user/'+ user.image}}\\\">\\n        <img (click)=\\\"loadUser(user)\\\" *ngIf=\\\"!user.image\\\"  src=\\\"../../assets/no-user.webp\\\">\\n      </ion-avatar>\\n      <ion-label>\\n        <h2 (click)=\\\"loadUser(user)\\\">{{user.name + ' ' + user.surname}}</h2>\\n        <h3 (click)=\\\"loadUser(user)\\\">{{user.nick}}</h3>\\n        <p (click)=\\\"loadUser(user)\\\">{{user.email}}</p>\\n        <div class=\\\"followButton\\\" *ngIf=\\\"user._id != identity._id\\\">\\n          <ion-button color=\\\"success\\\" (click)=\\\"followUser(user._id)\\\" *ngIf=\\\"follows.indexOf(user._id) < 0\\\">\\n            <ion-icon name=\\\"add-circle-outline\\\"></ion-icon> &nbsp; Follow\\n          </ion-button>\\n          <ion-button ion-button [color]=\\\"user._id == followUserOver ? 'primary' : 'warning'\\\"\\n            (mouseover)=\\\"mouseEnter(user._id)\\\" (mouseleave)=\\\"mouseLeave(user._id)\\\"\\n            *ngIf=\\\"follows.indexOf(user._id) >= 0\\\" (click)=unfollowUser(user._id)>\\n            <span *ngIf=\\\"user._id == followUserOver;else following\\\">\\n              <ion-icon name=\\\"close-circle-outline\\\"></ion-icon> &nbsp; Unfollow\\n            </span>\\n            <ng-template #following>\\n              <ion-icon name=\\\"checkmark-circle-outline\\\"></ion-icon> &nbsp; Following\\n            </ng-template>\\n          </ion-button>\\n        </div>\\n      </ion-label>\\n    </ion-item>\\n  </ion-list>\\n\\n\\n  <ion-infinite-scroll (ionInfinite)=\\\"doInfinite($event)\\\">\\n    <ion-infinite-scroll-content></ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PeoplePage } from './people.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PeoplePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PeoplePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PeoplePageRoutingModule } from './people-routing.module';\n\nimport { PeoplePage } from './people.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PeoplePageRoutingModule\n  ],\n  declarations: [PeoplePage]\n})\nexport class PeoplePageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3Blb3BsZS9wZW9wbGUucGFnZS5zY3NzIn0= */\"","import { Component, OnInit, ViewChild   } from '@angular/core';\nimport { Router, ActivatedRoute, Params } from '@angular/router'\nimport { User } from '../models/user'\nimport { Follow } from '../models/follow';\nimport { UserService } from '../services/user.service'\nimport { environment } from 'src/environments/environment';\nimport { AlertController, LoadingController, NavController, IonInfiniteScroll, ModalController  } from '@ionic/angular'\nimport {FollowService} from '../services/follow.service'\nimport {ProfilePage} from '../profile/profile.page'\n\n@Component({\n  selector: 'app-people',\n  templateUrl: './people.page.html',\n  styleUrls: ['./people.page.scss'],\n  providers: [UserService, FollowService]\n})\nexport class PeoplePage implements OnInit  {\n  public identity;\n  public token;\n  public page = 1;\n  public users;\n  public total;\n  public pages\n  public url;\n  public follows;\n  public followUserOver;\n \n  constructor(public modal: ModalController,private _route: ActivatedRoute, private _router: Router, private _userService: UserService, public alert: AlertController,public loading: LoadingController,public navCtrl: NavController, private _followService: FollowService) {\n    this.identity = this._userService.getIdentity();\n    this.token = this._userService.getToken();\n    this.url = 'https://api-meet-sport.herokuapp.com/api';\n   }\n\n  ngOnInit() {\n    this.getUsers();\n  }\n\n  async getUsers(){\n    let loading = this.loading.create({\n      message: 'Please wait...'\n    });\n    (await loading).present();\n    this._userService.getUsers(this.page).subscribe(\n      async response => {\n        if (!response.users) {\n          const alert = await this.alert.create({\n            message: 'Ohh! Something gone wrong. 😥',\n            buttons: ['OK']\n          });\n          (await loading).dismiss();\n          await alert.present();\n        }else{\n          this.users= response.users;\n          this.total = response.total;\n          this.page = response.page;\n          this.follows = response.users_following\n          console.log(response)\n          if (this.page > this.pages) {\n            this._router.navigate(['/people']);\n          }\n          (await loading).dismiss();\n        }\n      },\n      async error => {\n        var errorMessage = <any>error;\n        console.log(errorMessage);\n        if (errorMessage != null) {\n          const alert = await this.alert.create({\n            message: 'Ohh! Something gone wrong. 😥',\n            buttons: ['OK']\n          });\n          (await loading).dismiss();\n          await alert.present();\n        }\n      }\n    )\n  }\n\n  mouseEnter(user_id){\n    this.followUserOver = user_id;\n  }\n\n  mouseLeave(user_id) {\n    this.followUserOver = 0;\n  }\n\n  followUser(followed){\n    var follow = new Follow('', this.identity._id, followed);\n\n    this._followService.addFollow(this.token, follow).subscribe(\n      async response => {\n        if (!response.follow) {\n          const alert = await this.alert.create({\n            message: 'Ohh! Something gone wrong. 😥',\n            buttons: ['OK']\n          });\n          await alert.present();\n        }else{\n          this.follows.push(followed);\n        }\n      },\n      async error => {\n        const alert = await this.alert.create({\n          message: 'Ohh! Something gone wrong. 😥',\n          buttons: ['OK']\n        });\n        await alert.present();\n      }\n    )\n  }\n\n  unfollowUser(followed){\n    this._followService.deleteFollow(this.token,followed).subscribe(\n      response => {\n        var search = this.follows.indexOf(followed);\n        if (search != -1) {\n          this.follows.splice(search, 1)\n        }\n      },\n      async error => {\n        const alert = await this.alert.create({\n          message: 'Ohh! Something gone wrong. 😥',\n          buttons: ['OK']\n        });\n        await alert.present();\n      })\n  }\n\n\n  doInfinite(infiniteScroll) {\n    this.page++;\n    this.getUsers().then(result => infiniteScroll.target.complete());\n  }\n\n  async loadUser(user){\n    \n    const modal = await this.modal.create({\n      component: ProfilePage,\n      componentProps: {\n        'user': user,\n      }\n    });\n    return await modal.present();  \n    /* this._router.navigate(['/profile', id]); */\n  }\n\n}\n"],"sourceRoot":"webpack:///"}