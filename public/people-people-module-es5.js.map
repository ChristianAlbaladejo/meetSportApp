{"version":3,"sources":["src/app/people/people.page.html","src/app/people/people-routing.module.ts","src/app/people/people.module.ts","src/app/people/people.page.scss","src/app/people/people.page.ts"],"names":[],"mappings":"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","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar color=\\\"success\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>People</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n  <ion-list>\\n    <ion-list-header>\\n      People\\n    </ion-list-header>\\n\\n    <ion-item *ngFor=\\\"let user of users\\\" >\\n      <ion-avatar slot=\\\"start\\\">\\n        <img (click)=\\\"loadUser(user)\\\" *ngIf=\\\"user.image\\\" src=\\\"{{url + '/get-image-user/'+ user.image}}\\\">\\n        <img (click)=\\\"loadUser(user)\\\" *ngIf=\\\"!user.image\\\"  src=\\\"../../assets/no-user.webp\\\">\\n      </ion-avatar>\\n      <ion-label>\\n        <h2 (click)=\\\"loadUser(user)\\\">{{user.name + ' ' + user.surname}}</h2>\\n        <h3 (click)=\\\"loadUser(user)\\\">{{user.nick}}</h3>\\n        <p (click)=\\\"loadUser(user)\\\">{{user.email}}</p>\\n        <div class=\\\"followButton\\\" *ngIf=\\\"user._id != identity._id\\\">\\n          <ion-button color=\\\"success\\\" (click)=\\\"followUser(user._id)\\\" *ngIf=\\\"follows.indexOf(user._id) < 0\\\">\\n            <ion-icon name=\\\"add-circle-outline\\\"></ion-icon> &nbsp; Follow\\n          </ion-button>\\n          <ion-button ion-button [color]=\\\"user._id == followUserOver ? 'primary' : 'warning'\\\"\\n            (mouseover)=\\\"mouseEnter(user._id)\\\" (mouseleave)=\\\"mouseLeave(user._id)\\\"\\n            *ngIf=\\\"follows.indexOf(user._id) >= 0\\\" (click)=unfollowUser(user._id)>\\n            <span *ngIf=\\\"user._id == followUserOver;else following\\\">\\n              <ion-icon name=\\\"close-circle-outline\\\"></ion-icon> &nbsp; Unfollow\\n            </span>\\n            <ng-template #following>\\n              <ion-icon name=\\\"checkmark-circle-outline\\\"></ion-icon> &nbsp; Following\\n            </ng-template>\\n          </ion-button>\\n        </div>\\n      </ion-label>\\n    </ion-item>\\n  </ion-list>\\n\\n\\n  <ion-infinite-scroll (ionInfinite)=\\\"doInfinite($event)\\\">\\n    <ion-infinite-scroll-content></ion-infinite-scroll-content>\\n  </ion-infinite-scroll>\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PeoplePage } from './people.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PeoplePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PeoplePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { PeoplePageRoutingModule } from './people-routing.module';\n\nimport { PeoplePage } from './people.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PeoplePageRoutingModule\n  ],\n  declarations: [PeoplePage]\n})\nexport class PeoplePageModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3Blb3BsZS9wZW9wbGUucGFnZS5zY3NzIn0= */\"","import { Component, OnInit, ViewChild   } from '@angular/core';\nimport { Router, ActivatedRoute, Params } from '@angular/router'\nimport { User } from '../models/user'\nimport { Follow } from '../models/follow';\nimport { UserService } from '../services/user.service'\nimport { environment } from 'src/environments/environment';\nimport { AlertController, LoadingController, NavController, IonInfiniteScroll, ModalController  } from '@ionic/angular'\nimport {FollowService} from '../services/follow.service'\nimport {ProfilePage} from '../profile/profile.page'\n\n@Component({\n  selector: 'app-people',\n  templateUrl: './people.page.html',\n  styleUrls: ['./people.page.scss'],\n  providers: [UserService, FollowService]\n})\nexport class PeoplePage implements OnInit  {\n  public identity;\n  public token;\n  public page = 1;\n  public users;\n  public total;\n  public pages\n  public url;\n  public follows;\n  public followUserOver;\n \n  constructor(public modal: ModalController,private _route: ActivatedRoute, private _router: Router, private _userService: UserService, public alert: AlertController,public loading: LoadingController,public navCtrl: NavController, private _followService: FollowService) {\n    this.identity = this._userService.getIdentity();\n    this.token = this._userService.getToken();\n    this.url = 'https://api-meet-sport.herokuapp.com/api';\n   }\n\n  ngOnInit() {\n    this.getUsers();\n  }\n\n  async getUsers(){\n    let loading = this.loading.create({\n      message: 'Please wait...'\n    });\n    (await loading).present();\n    this._userService.getUsers(this.page).subscribe(\n      async response => {\n        if (!response.users) {\n          const alert = await this.alert.create({\n            message: 'Ohh! Something gone wrong. ðŸ˜¥',\n            buttons: ['OK']\n          });\n          (await loading).dismiss();\n          await alert.present();\n        }else{\n          this.users= response.users;\n          this.total = response.total;\n          this.page = response.page;\n          this.follows = response.users_following\n          console.log(response)\n          if (this.page > this.pages) {\n            this._router.navigate(['/people']);\n          }\n          (await loading).dismiss();\n        }\n      },\n      async error => {\n        var errorMessage = <any>error;\n        console.log(errorMessage);\n        if (errorMessage != null) {\n          const alert = await this.alert.create({\n            message: 'Ohh! Something gone wrong. ðŸ˜¥',\n            buttons: ['OK']\n          });\n          (await loading).dismiss();\n          await alert.present();\n        }\n      }\n    )\n  }\n\n  mouseEnter(user_id){\n    this.followUserOver = user_id;\n  }\n\n  mouseLeave(user_id) {\n    this.followUserOver = 0;\n  }\n\n  followUser(followed){\n    var follow = new Follow('', this.identity._id, followed);\n\n    this._followService.addFollow(this.token, follow).subscribe(\n      async response => {\n        if (!response.follow) {\n          const alert = await this.alert.create({\n            message: 'Ohh! Something gone wrong. ðŸ˜¥',\n            buttons: ['OK']\n          });\n          await alert.present();\n        }else{\n          this.follows.push(followed);\n        }\n      },\n      async error => {\n        const alert = await this.alert.create({\n          message: 'Ohh! Something gone wrong. ðŸ˜¥',\n          buttons: ['OK']\n        });\n        await alert.present();\n      }\n    )\n  }\n\n  unfollowUser(followed){\n    this._followService.deleteFollow(this.token,followed).subscribe(\n      response => {\n        var search = this.follows.indexOf(followed);\n        if (search != -1) {\n          this.follows.splice(search, 1)\n        }\n      },\n      async error => {\n        const alert = await this.alert.create({\n          message: 'Ohh! Something gone wrong. ðŸ˜¥',\n          buttons: ['OK']\n        });\n        await alert.present();\n      })\n  }\n\n\n  doInfinite(infiniteScroll) {\n    this.page++;\n    this.getUsers().then(result => infiniteScroll.target.complete());\n  }\n\n  async loadUser(user){\n    \n    const modal = await this.modal.create({\n      component: ProfilePage,\n      componentProps: {\n        'user': user,\n      }\n    });\n    return await modal.present();  \n    /* this._router.navigate(['/profile', id]); */\n  }\n\n}\n"],"sourceRoot":"webpack:///","file":"people-people-module-es5.js"}