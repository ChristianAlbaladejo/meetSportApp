function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{"7UCR":function(e,n,t){"use strict";t.r(n),t.d(n,"UserPageModule",(function(){return O}));var i=t("ofXK"),r=t("3Pt+"),o=t("TEn/"),s=t("tyNb"),a=t("mrSG"),c=t("qfBg"),u=t("jT/F"),b=t("RfxN"),l=t("fXoL");function g(e,n){if(1&e){var t=l.Nb();l.Mb(0,"ion-button",20),l.Ub("click",(function(){return l.fc(t),l.Wb().edit()})),l.kc(1,"Edit"),l.Lb()}}function d(e,n){if(1&e){var t=l.Nb();l.Mb(0,"ion-button",20),l.Ub("click",(function(){return l.fc(t),l.Wb().save()})),l.kc(1,"Save"),l.Lb()}}function f(e,n){if(1&e&&l.Kb(0,"img",21),2&e){var t=l.Wb();l.cc("src",t.url+"/get-image-user/"+t.user.image,l.gc)}}function h(e,n){1&e&&l.Kb(0,"img",22)}function m(e,n){if(1&e&&(l.Mb(0,"p"),l.Mb(1,"ion-chip",23),l.Mb(2,"ion-label"),l.kc(3),l.Lb(),l.Lb(),l.Mb(4,"ion-chip",23),l.Mb(5,"ion-label"),l.kc(6),l.Lb(),l.Lb(),l.Lb()),2&e){var t=l.Wb();l.zb(3),l.mc("Following \xa0 ",t.stats.following,""),l.zb(3),l.mc("Followed \xa0 ",t.stats.followed,"")}}function p(e,n){1&e&&(l.Mb(0,"span"),l.kc(1," Name is required "),l.Lb())}function v(e,n){1&e&&(l.Mb(0,"span"),l.kc(1," Surname is required "),l.Lb())}function M(e,n){1&e&&(l.Mb(0,"span"),l.kc(1," Nick is required "),l.Lb())}function k(e,n){1&e&&(l.Mb(0,"span"),l.kc(1," Email is required "),l.Lb())}var y,x,w,C=[{path:"",component:(y=function(){function e(n,t,i,r,o,s,a,c){_classCallCheck(this,e),this.navCtrl=n,this.modal=t,this._route=i,this._router=r,this._userService=o,this.alert=s,this.loading=a,this._uploadService=c,this.mode="login",this.user=this._userService.getIdentity(),this.identity=this.user,this.token=this._userService.getToken(),this.editing=!1,this.url="https://api-meet-sport.herokuapp.com/api",this.stats=this._userService.getStats()}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"edit",value:function(){this.editing=!0}},{key:"getUser",value:function(e){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var t=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:this._userService.getUser(e).subscribe((function(e){return Object(a.a)(t,void 0,void 0,regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.user){n.next=4;break}console.log(e),this.user=e.user,console.log(this.user),n.next=9;break;case 4:return n.next=6,this.alert.create({message:"Ohh! Something gone wrong. \ud83d\ude25",buttons:["OK"]});case 6:return t=n.sent,n.next=9,t.present();case 9:case"end":return n.stop()}}),n,this)})))}),(function(e){return Object(a.a)(t,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alert.create({message:"Ohh! Something gone wrong. \ud83d\ude25",buttons:["OK"]});case 2:return n=e.sent,e.next=5,n.present();case 5:case"end":return e.stop()}}),e,this)})))}));case 1:case"end":return n.stop()}}),n,this)})))}},{key:"save",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,t,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=this.user.name&&""!=this.user.surname&&""!=this.user.nick&&""!=this.user.email){e.next=9;break}return e.next=3,this.alert.create({message:"Ohh! Something gone wrong. \ud83d\ude25",buttons:["OK"]});case 3:return n=e.sent,this.getUser(this.identity._id),e.next=7,n.present();case 7:e.next=15;break;case 9:return t=this.loading.create({message:"Please wait..."}),e.next=12,t;case 12:e.sent.present(),this._userService.updateUser(this.user).subscribe((function(e){return Object(a.a)(i,void 0,void 0,regeneratorRuntime.mark((function n(){var i,r=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.user){n.next=4;break}localStorage.setItem("identify",JSON.stringify(this.user)),this.identity=this.user,this._uploadService.makeFileRequest(this.url+"/upload-image-user/"+this.user._id,[],this.filesToUpload,this.token,"image").then((function(e){console.log(e),r.user.image=e.user.image,localStorage.setItem("identify",JSON.stringify(r.user))})),n.next=9;break;case 4:return n.next=6,this.alert.create({message:"Ohh! Something gone wrong. \ud83d\ude25",buttons:["OK"]});case 6:return i=n.sent,n.next=9,i.present();case 9:return n.next=11,t;case 11:n.sent.dismiss();case 12:case"end":return n.stop()}}),n,this)})))}),(function(e){return Object(a.a)(i,void 0,void 0,regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null==e){n.next=9;break}return n.next=3,this.alert.create({message:"Ohh! Something gone wrong. \ud83d\ude25",buttons:["OK"]});case 3:return i=n.sent,n.next=6,t;case 6:return n.sent.dismiss(),n.next=9,i.present();case 9:case"end":return n.stop()}}),n,this)})))})),this.editing=!1;case 15:case"end":return e.stop()}}),e,this)})))}},{key:"following",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modal.create({component:b.a,componentProps:{user:this.user}});case 2:return n=e.sent,e.next=5,n.present();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})))}},{key:"fileChangeEvent",value:function(e){this.filesToUpload=e.target.files,console.log(this.filesToUpload)}},{key:"takePicture",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))}}]),e}(),y.\u0275fac=function(e){return new(e||y)(l.Jb(o.O),l.Jb(o.N),l.Jb(s.a),l.Jb(s.g),l.Jb(c.a),l.Jb(o.a),l.Jb(o.L),l.Jb(u.a))},y.\u0275cmp=l.Db({type:y,selectors:[["app-user"]],features:[l.yb([c.a,u.a])],decls:44,vars:18,consts:[["slot","start","color","success"],["slot","end"],[3,"click",4,"ngIf"],["fullscreen",""],["id","container"],["class","imageUser",3,"src",4,"ngIf"],["src","../../assets/no-user.webp",4,"ngIf"],[4,"ngIf"],["type","file","name","file","id","file",1,"fileInput",3,"disabled","change"],["for","file"],["name","images"],["stacked",""],["name","name","type","text","required","",3,"ngModel","readonly","ngModelChange"],["name","ngModel"],["name","surname","type","text","required","",3,"ngModel","readonly","ngModelChange"],["surname","ngModel"],["name","nick","type","text","required","",3,"ngModel","readonly","ngModelChange"],["nick","ngModel"],["name","email","type","text","required","",3,"ngModel","readonly","ngModelChange"],["email","ngModel"],[3,"click"],[1,"imageUser",3,"src"],["src","../../assets/no-user.webp"],["outline","","color","secondary"]],template:function(e,n){if(1&e&&(l.Mb(0,"ion-header"),l.Mb(1,"ion-toolbar"),l.Mb(2,"ion-buttons",0),l.Kb(3,"ion-menu-button"),l.Lb(),l.Mb(4,"ion-title"),l.kc(5,"User"),l.Lb(),l.Mb(6,"ion-buttons",1),l.ic(7,g,2,0,"ion-button",2),l.ic(8,d,2,0,"ion-button",2),l.Lb(),l.Lb(),l.Lb(),l.Mb(9,"ion-content",3),l.Mb(10,"div",4),l.Mb(11,"ion-card"),l.ic(12,f,1,1,"img",5),l.ic(13,h,1,0,"img",6),l.ic(14,m,7,2,"p",7),l.Mb(15,"ion-item"),l.Mb(16,"input",8),l.Ub("change",(function(e){return n.fileChangeEvent(e)})),l.Lb(),l.Mb(17,"label",9),l.Kb(18,"ion-icon",10),l.kc(19," Chage user image "),l.Lb(),l.Lb(),l.Mb(20,"ion-item"),l.Mb(21,"ion-label",11),l.kc(22,"Name: "),l.Lb(),l.Mb(23,"ion-input",12,13),l.Ub("ngModelChange",(function(e){return n.identity.name=e})),l.Lb(),l.ic(25,p,2,0,"span",7),l.Lb(),l.Mb(26,"ion-item"),l.Mb(27,"ion-label",11),l.kc(28,"Surname: "),l.Lb(),l.Mb(29,"ion-input",14,15),l.Ub("ngModelChange",(function(e){return n.identity.surname=e})),l.Lb(),l.ic(31,v,2,0,"span",7),l.Lb(),l.Mb(32,"ion-item"),l.Mb(33,"ion-label",11),l.kc(34,"Nick: "),l.Lb(),l.Mb(35,"ion-input",16,17),l.Ub("ngModelChange",(function(e){return n.identity.nick=e})),l.Lb(),l.ic(37,M,2,0,"span",7),l.Lb(),l.Mb(38,"ion-item"),l.Mb(39,"ion-label",11),l.kc(40,"Email: "),l.Lb(),l.Mb(41,"ion-input",18,19),l.Ub("ngModelChange",(function(e){return n.identity.email=e})),l.Lb(),l.ic(43,k,2,0,"span",7),l.Lb(),l.Lb(),l.Lb(),l.Lb()),2&e){var t=l.ec(24),i=l.ec(30),r=l.ec(36),o=l.ec(42);l.zb(7),l.bc("ngIf",!n.editing),l.zb(1),l.bc("ngIf",n.editing),l.zb(4),l.bc("ngIf",n.user.image),l.zb(1),l.bc("ngIf",!n.user.image),l.zb(1),l.bc("ngIf",n.stats),l.zb(2),l.bc("disabled",!n.editing),l.zb(7),l.bc("ngModel",n.identity.name)("readonly",!n.editing),l.zb(2),l.bc("ngIf",!t.value&&t.touched),l.zb(4),l.bc("ngModel",n.identity.surname)("readonly",!n.editing),l.zb(2),l.bc("ngIf",!i.value&&i.touched),l.zb(4),l.bc("ngModel",n.identity.nick)("readonly",!n.editing),l.zb(2),l.bc("ngIf",!r.value&&r.touched),l.zb(4),l.bc("ngModel",n.identity.email)("readonly",!n.editing),l.zb(2),l.bc("ngIf",!o.value&&o.touched)}},directives:[o.o,o.I,o.e,o.y,o.H,i.j,o.j,o.f,o.t,o.p,o.u,o.s,o.T,r.h,r.c,r.f,o.d,o.h],styles:[".fileInput[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}.fileInput[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#717171;background-color:#fff;display:inline-block;padding:.5em 1em;border:1px solid #ccc;cursor:pointer}.imageUser[_ngcontent-%COMP%]{width:100%;height:18rem}#container[_ngcontent-%COMP%]{max-width:500px;margin:auto}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]}),y)}],L=((w=function e(){_classCallCheck(this,e)}).\u0275mod=l.Hb({type:w}),w.\u0275inj=l.Gb({factory:function(e){return new(e||w)},imports:[[s.i.forChild(C)],s.i]}),w),O=((x=function e(){_classCallCheck(this,e)}).\u0275mod=l.Hb({type:x}),x.\u0275inj=l.Gb({factory:function(e){return new(e||x)},imports:[[i.b,r.a,o.J,L]]}),x)}}]);