function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{MnDo:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("tk/3"),o=n("fXoL"),a=function(){var t=function(){function t(e){_classCallCheck(this,t),this._http=e,this.url="https://api-meet-sport.herokuapp.com/api"}return _createClass(t,[{key:"addFollow",value:function(t,e){var n=JSON.stringify(e),o=(new i.c).set("Content-Type","application/json").set("Authorization",t);return this._http.post(this.url+"/follow",n,{headers:o})}},{key:"deleteFollow",value:function(t,e){var n=(new i.c).set("Content-Type","application/json").set("Authorization",t);return this._http.delete(this.url+"/deleteFollow/"+e,{headers:n})}},{key:"getFollowing",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=(new i.c).set("Content-Type","application/json").set("Authorization",t);return this._http.get(this.url+"/following/"+e+"/"+n,{headers:o})}},{key:"getMyFollows",value:function(t){var e=(new i.c).set("Content-Type","application/json").set("Authorization",t);return this._http.get(this.url+"/get-my-follows/true",{headers:e})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Qb(i.a))},t.\u0275prov=o.Fb({token:t,factory:t.\u0275fac}),t}()},cdOc:function(t,e,n){"use strict";n.r(e),n.d(e,"AddPublicationPageModule",(function(){return w}));var i,o,a,r=n("ofXK"),s=n("3Pt+"),c=n("TEn/"),u=n("tyNb"),l=n("mrSG"),h=n("Bfh1"),p=function t(e,n,i,o,a,r,s,c){_classCallCheck(this,t),this._id=e,this.text=n,this.file=i,this.date=o,this.created_at=a,this.user=r,this.like=s,this.location=c},d=n("qfBg"),b=n("MnDo"),f=n("tBOM"),g=n("wzbf"),v=n("jT/F"),m=n("fXoL"),k=[{path:"",component:(i=function(){function t(e,n,i,o,a,r,s,c,u,l,h,d,b){_classCallCheck(this,t),this._uploadService=e,this.toastController=n,this._route=i,this.ngZOne=o,this._router=a,this._userService=r,this.alert=s,this.loading=c,this.navCtrl=u,this._followService=l,this._googleMaps=h,this.geolocation=d,this._publicationService=b,this.mapRef=null,this.identity=this._userService.getIdentity(),this.token=this._userService.getToken(),this.url="https://api-meet-sport.herokuapp.com/api",this.publication=new p("","","","","",this.identity._id,"","")}return _createClass(t,[{key:"ngOnInit",value:function(){this.loadMap()}},{key:"loadMap",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,i,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loading.create();case 2:return(e=t.sent).present(),t.next=6,this.getLocation();case 6:n=t.sent,this.latitude=n.lat,this.longitude=n.lng,i=document.getElementById("map"),this.mapRef=new google.maps.Map(i,{center:n,zoom:12}),google.maps.event.addListenerOnce(this.mapRef,"idle",(function(){e.dismiss(),o.addMaker(n.lat,n.lng)}));case 10:case"end":return t.stop()}}),t,this)})))}},{key:"addMaker",value:function(t,e){var n=new google.maps.Marker({position:{lat:t,lng:e},draggable:!0,animation:google.maps.Animation.DROP,map:this.mapRef,title:"Hello World!"});this.marker=n,console.log(this.latitude,this.longitude)}},{key:"getLocation",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.geolocation.getCurrentPosition();case 2:return e=t.sent,t.abrupt("return",{lat:e.coords.latitude,lng:e.coords.longitude});case 4:case"end":return t.stop()}}),t,this)})))}},{key:"cancel",value:function(){this._router.navigate(["/"])}},{key:"save",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=this.date&&null!=this.time){t.next=7;break}return t.next=3,this.toastController.create({message:"Your publication have not been saved.",duration:3500,color:"danger"});case 3:t.sent.present(),this._router.navigate(["/"]),t.next=8;break;case 7:this.publication.location=this.marker.getPosition().lat()+","+this.marker.getPosition().lng(),this.publication.date=this.date+", "+this.time,this._publicationService.addPublication(this.token,this.publication).subscribe((function(t){return Object(l.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.publication){e.next=6;break}return e.next=3,this.toastController.create({message:"Your publication have been saved.",duration:3500,color:"success"});case 3:e.sent.present(),e.next=9;break;case 6:return e.next=8,this.toastController.create({message:"Your publication have not been saved.",duration:3500,color:"danger"});case 8:e.sent.present();case 9:case"end":return e.stop()}}),e,this)})))}),(function(t){return Object(l.a)(e,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.toastController.create({message:"Your settings have not been saved.",duration:3500,color:"danger"});case 2:t.sent.present();case 3:case"end":return t.stop()}}),t,this)})))})),this._router.navigate(["/"]);case 8:case"end":return t.stop()}}),t,this)})))}},{key:"fileChangeEvent",value:function(t){this.filesToUpload=t.target.files,console.log(this.filesToUpload)}}]),t}(),i.\u0275fac=function(t){return new(t||i)(m.Jb(v.a),m.Jb(c.U),m.Jb(u.a),m.Jb(m.z),m.Jb(u.g),m.Jb(d.a),m.Jb(c.a),m.Jb(c.L),m.Jb(c.O),m.Jb(b.a),m.Jb(f.a),m.Jb(h.a),m.Jb(g.a))},i.\u0275cmp=m.Db({type:i,selectors:[["app-add-publication"]],features:[m.yb([d.a,b.a,g.a,v.a])],decls:27,vars:3,consts:[["color","success"],["slot","start"],[3,"click"],["name","chevron-back-outline"],["slot","end"],["name","text","type","text-area","required","",3,"ngModel","ngModelChange"],["text","ngModel"],["display-format","h:mm A","picker-format","h:mm A","value","1990-02-19T07:43Z",3,"ngModel","ngModelChange"],["value","1990-02-20","placeholder","Select Date",3,"ngModel","ngModelChange"],["id","map"]],template:function(t,e){1&t&&(m.Mb(0,"ion-header"),m.Mb(1,"ion-toolbar",0),m.Mb(2,"ion-buttons",1),m.Mb(3,"ion-button",2),m.Ub("click",(function(){return e.cancel()})),m.Kb(4,"ion-icon",3),m.kc(5,"Cancel"),m.Lb(),m.Lb(),m.Mb(6,"ion-title"),m.kc(7,"Add Publication"),m.Lb(),m.Mb(8,"ion-buttons",4),m.Mb(9,"ion-button",2),m.Ub("click",(function(){return e.save()})),m.kc(10,"Save"),m.Lb(),m.Lb(),m.Lb(),m.Lb(),m.Mb(11,"ion-content"),m.Mb(12,"ion-item"),m.Mb(13,"ion-label"),m.kc(14,"What are you going to do?"),m.Lb(),m.Lb(),m.Mb(15,"ion-item"),m.Mb(16,"ion-textarea",5,6),m.Ub("ngModelChange",(function(t){return e.publication.text=t})),m.Lb(),m.Lb(),m.Mb(18,"ion-item"),m.Mb(19,"ion-label"),m.kc(20,"Time of exit"),m.Lb(),m.Mb(21,"ion-datetime",7),m.Ub("ngModelChange",(function(t){return e.time=t})),m.Lb(),m.Lb(),m.Mb(22,"ion-item"),m.Mb(23,"ion-label"),m.kc(24,"Date of the activity"),m.Lb(),m.Mb(25,"ion-datetime",8),m.Ub("ngModelChange",(function(t){return e.date=t})),m.Lb(),m.Lb(),m.Kb(26,"div",9),m.Lb()),2&t&&(m.zb(16),m.bc("ngModel",e.publication.text),m.zb(5),m.bc("ngModel",e.time),m.zb(4),m.bc("ngModel",e.date))},directives:[c.o,c.I,c.e,c.d,c.p,c.H,c.j,c.t,c.u,c.G,c.T,s.h,s.c,s.f,c.k,c.S],styles:['@charset "UTF-8";#map[_ngcontent-%COMP%]{width:100%;height:100%}#current[_ngcontent-%COMP%]{padding-top:25px}.fileInput[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}.fileInput[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#717171;background-color:#fff;display:inline-block;padding:.5em 1em;border:1px solid #ccc;cursor:pointer}.toast-error[_ngcontent-%COMP%]{-\u2013background:red}']}),i)}],y=((a=function t(){_classCallCheck(this,t)}).\u0275mod=m.Hb({type:a}),a.\u0275inj=m.Gb({factory:function(t){return new(t||a)},imports:[[u.i.forChild(k)],u.i]}),a),w=((o=function t(){_classCallCheck(this,t)}).\u0275mod=m.Hb({type:o}),o.\u0275inj=m.Gb({factory:function(t){return new(t||o)},imports:[[r.b,s.a,c.J,y]]}),o)},"jT/F":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("fXoL"),o=function(){var t=function(){function t(){_classCallCheck(this,t),this.url="https://api-meet-sport.herokuapp.com/api"}return _createClass(t,[{key:"makeFileRequest",value:function(t,e,n,i,o){return new Promise((function(e,a){for(var r=new FormData,s=new XMLHttpRequest,c=0;c<n.length;c++)r.append(o,n[c],n[c].name);s.onreadystatechange=function(){4==s.readyState&&(200==s.status?e(JSON.parse(s.response)):a(s.response))},s.open("POST",t,!0),s.setRequestHeader("Authorization",i),s.send(r)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Fb({token:t,factory:t.\u0275fac}),t}()},wzbf:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("tk/3"),o=n("fXoL"),a=n("TEn/"),r=function(){var t=function(){function t(e,n,i){_classCallCheck(this,t),this._http=e,this.alert=n,this.loading=i,this.url="https://api-meet-sport.herokuapp.com/api"}return _createClass(t,[{key:"addPublication",value:function(t,e){var n=JSON.stringify(e),o=(new i.c).set("Content-Type","application/json").set("Authorization",t);return this._http.post(this.url+"/publication",n,{headers:o})}},{key:"getPublications",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=(new i.c).set("Content-Type","application/json").set("Authorization",t);return this._http.get(this.url+"/publications/"+e,{headers:n})}},{key:"getPublicationsUser",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;console.log(e);var o=(new i.c).set("Content-Type","application/json").set("Authorization",t);return this._http.get(this.url+"/publications-user/"+e+"/"+n,{headers:o})}},{key:"deletePublication",value:function(t,e){var n=(new i.c).set("Content-Type","application/json").set("Authorization",t);return this._http.delete(this.url+"/publication/"+e,{headers:n})}},{key:"like",value:function(t,e){var n=JSON.stringify(e);console.log(e);var o=(new i.c).set("Content-Type","application/json").set("Authorization",t);return this._http.post(this.url+"/like/"+e._id,n,{headers:o})}},{key:"dislike",value:function(t,e){var n=JSON.stringify(e);console.log(e);var o=(new i.c).set("Content-Type","application/json").set("Authorization",t);return this._http.post(this.url+"/dislike/"+e._id,n,{headers:o})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Qb(i.a),o.Qb(a.a),o.Qb(a.L))},t.\u0275prov=o.Fb({token:t,factory:t.\u0275fac}),t}()}}]);