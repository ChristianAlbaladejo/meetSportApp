function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{N3Et:function(e,t,n){"use strict";n.r(t),n.d(t,"PeoplePageModule",(function(){return L}));var i=n("ofXK"),r=n("3Pt+"),o=n("TEn/"),s=n("tyNb"),c=n("mrSG"),a=n("nAqH"),u=n("qfBg"),l=n("MnDo"),b=n("ncJE"),f=n("fXoL");function p(e,t){if(1&e){var n=f.Nb();f.Mb(0,"img",9),f.Ub("click",(function(){f.fc(n);var e=f.Wb().$implicit;return f.Wb().loadUser(e)})),f.Lb()}if(2&e){var i=f.Wb().$implicit,r=f.Wb();f.cc("src",r.url+"/get-image-user/"+i.image,f.gc)}}function h(e,t){if(1&e){var n=f.Nb();f.Mb(0,"img",10),f.Ub("click",(function(){f.fc(n);var e=f.Wb().$implicit;return f.Wb().loadUser(e)})),f.Lb()}}function m(e,t){if(1&e){var n=f.Nb();f.Mb(0,"ion-button",14),f.Ub("click",(function(){f.fc(n);var e=f.Wb(2).$implicit;return f.Wb().followUser(e._id)})),f.Kb(1,"ion-icon",15),f.kc(2," \xa0 Follow "),f.Lb()}}function g(e,t){1&e&&(f.Mb(0,"span"),f.Kb(1,"ion-icon",19),f.kc(2," \xa0 Unfollow "),f.Lb())}function v(e,t){1&e&&(f.Kb(0,"ion-icon",20),f.kc(1," \xa0 Following "))}function d(e,t){if(1&e){var n=f.Nb();f.Mb(0,"ion-button",16),f.Ub("mouseover",(function(){f.fc(n);var e=f.Wb(2).$implicit;return f.Wb().mouseEnter(e._id)}))("mouseleave",(function(){f.fc(n);var e=f.Wb(2).$implicit;return f.Wb().mouseLeave(e._id)}))("click",(function(){f.fc(n);var e=f.Wb(2).$implicit;return f.Wb().unfollowUser(e._id)})),f.ic(1,g,3,0,"span",17),f.ic(2,v,2,0,"ng-template",null,18,f.jc),f.Lb()}if(2&e){var i=f.ec(3),r=f.Wb(2).$implicit,o=f.Wb();f.bc("color",r._id==o.followUserOver?"primary":"warning"),f.zb(1),f.bc("ngIf",r._id==o.followUserOver)("ngIfElse",i)}}function w(e,t){if(1&e&&(f.Mb(0,"div",11),f.ic(1,m,3,0,"ion-button",12),f.ic(2,d,4,3,"ion-button",13),f.Lb()),2&e){var n=f.Wb().$implicit,i=f.Wb();f.zb(1),f.bc("ngIf",i.follows.indexOf(n._id)<0),f.zb(1),f.bc("ngIf",i.follows.indexOf(n._id)>=0)}}function k(e,t){if(1&e){var n=f.Nb();f.Mb(0,"ion-item"),f.Mb(1,"ion-avatar",1),f.ic(2,p,1,1,"img",5),f.ic(3,h,1,0,"img",6),f.Lb(),f.Mb(4,"ion-label"),f.Mb(5,"h2",7),f.Ub("click",(function(){f.fc(n);var e=t.$implicit;return f.Wb().loadUser(e)})),f.kc(6),f.Lb(),f.Mb(7,"h3",7),f.Ub("click",(function(){f.fc(n);var e=t.$implicit;return f.Wb().loadUser(e)})),f.kc(8),f.Lb(),f.Mb(9,"p",7),f.Ub("click",(function(){f.fc(n);var e=t.$implicit;return f.Wb().loadUser(e)})),f.kc(10),f.Lb(),f.ic(11,w,3,2,"div",8),f.Lb(),f.Lb()}if(2&e){var i=t.$implicit,r=f.Wb();f.zb(2),f.bc("ngIf",i.image),f.zb(1),f.bc("ngIf",!i.image),f.zb(3),f.lc(i.name+" "+i.surname),f.zb(2),f.lc(i.nick),f.zb(2),f.lc(i.email),f.zb(1),f.bc("ngIf",i._id!=r.identity._id)}}var x,_,O,U=[{path:"",component:(x=function(){function e(t,n,i,r,o,s,c,a){_classCallCheck(this,e),this.modal=t,this._route=n,this._router=i,this._userService=r,this.alert=o,this.loading=s,this.navCtrl=c,this._followService=a,this.page=1,this.identity=this._userService.getIdentity(),this.token=this._userService.getToken(),this.url="https://api-meet-sport.herokuapp.com/api"}return _createClass(e,[{key:"ngOnInit",value:function(){this.getUsers()}},{key:"getUsers",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.loading.create({message:"Please wait..."}),e.next=3,t;case 3:e.sent.present(),this._userService.getUsers(this.page).subscribe((function(e){return Object(c.a)(n,void 0,void 0,regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.users){n.next=12;break}return this.users=e.users,this.total=e.total,this.page=e.page,this.follows=e.users_following,console.log(e),this.page>this.pages&&this._router.navigate(["/people"]),n.next=9,t;case 9:n.sent.dismiss(),n.next=20;break;case 12:return n.next=14,this.alert.create({message:"Ohh! Something gone wrong. \ud83d\ude25",buttons:["OK"]});case 14:return i=n.sent,n.next=17,t;case 17:return n.sent.dismiss(),n.next=20,i.present();case 20:case"end":return n.stop()}}),n,this)})))}),(function(e){return Object(c.a)(n,void 0,void 0,regeneratorRuntime.mark((function n(){var i,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e,console.log(i),null==i){n.next=10;break}return n.next=4,this.alert.create({message:"Ohh! Something gone wrong. \ud83d\ude25",buttons:["OK"]});case 4:return r=n.sent,n.next=7,t;case 7:return n.sent.dismiss(),n.next=10,r.present();case 10:case"end":return n.stop()}}),n,this)})))}));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"mouseEnter",value:function(e){this.followUserOver=e}},{key:"mouseLeave",value:function(e){this.followUserOver=0}},{key:"followUser",value:function(e){var t=this,n=new a.a("",this.identity._id,e);this._followService.addFollow(this.token,n).subscribe((function(n){return Object(c.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.follow){t.next=4;break}this.follows.push(e),t.next=9;break;case 4:return t.next=6,this.alert.create({message:"Ohh! Something gone wrong. \ud83d\ude25",buttons:["OK"]});case 6:return i=t.sent,t.next=9,i.present();case 9:case"end":return t.stop()}}),t,this)})))}),(function(e){return Object(c.a)(t,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alert.create({message:"Ohh! Something gone wrong. \ud83d\ude25",buttons:["OK"]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}))}},{key:"unfollowUser",value:function(e){var t=this;this._followService.deleteFollow(this.token,e).subscribe((function(n){var i=t.follows.indexOf(e);-1!=i&&t.follows.splice(i,1)}),(function(e){return Object(c.a)(t,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.alert.create({message:"Ohh! Something gone wrong. \ud83d\ude25",buttons:["OK"]});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e,this)})))}))}},{key:"doInfinite",value:function(e){this.page++,this.getUsers().then((function(t){return e.target.complete()}))}},{key:"loadUser",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modal.create({component:b.a,componentProps:{user:e}});case 2:return n=t.sent,t.next=5,n.present();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})))}}]),e}(),x.\u0275fac=function(e){return new(e||x)(f.Jb(o.N),f.Jb(s.a),f.Jb(s.g),f.Jb(u.a),f.Jb(o.a),f.Jb(o.L),f.Jb(o.O),f.Jb(l.a))},x.\u0275cmp=f.Db({type:x,selectors:[["app-people"]],features:[f.yb([u.a,l.a])],decls:13,vars:2,consts:[["color","success"],["slot","start"],[3,"fullscreen"],[4,"ngFor","ngForOf"],[3,"ionInfinite"],[3,"src","click",4,"ngIf"],["src","../../assets/no-user.webp",3,"click",4,"ngIf"],[3,"click"],["class","followButton",4,"ngIf"],[3,"src","click"],["src","../../assets/no-user.webp",3,"click"],[1,"followButton"],["color","success",3,"click",4,"ngIf"],["ion-button","",3,"color","mouseover","mouseleave","click",4,"ngIf"],["color","success",3,"click"],["name","add-circle-outline"],["ion-button","",3,"color","mouseover","mouseleave","click"],[4,"ngIf","ngIfElse"],["following",""],["name","close-circle-outline"],["name","checkmark-circle-outline"]],template:function(e,t){1&e&&(f.Mb(0,"ion-header"),f.Mb(1,"ion-toolbar",0),f.Mb(2,"ion-buttons",1),f.Kb(3,"ion-menu-button"),f.Lb(),f.Mb(4,"ion-title"),f.kc(5,"People"),f.Lb(),f.Lb(),f.Lb(),f.Mb(6,"ion-content",2),f.Mb(7,"ion-list"),f.Mb(8,"ion-list-header"),f.kc(9," People "),f.Lb(),f.ic(10,k,12,6,"ion-item",3),f.Lb(),f.Mb(11,"ion-infinite-scroll",4),f.Ub("ionInfinite",(function(e){return t.doInfinite(e)})),f.Kb(12,"ion-infinite-scroll-content"),f.Lb(),f.Lb()),2&e&&(f.zb(6),f.bc("fullscreen",!0),f.zb(4),f.bc("ngForOf",t.users))},directives:[o.o,o.I,o.e,o.y,o.H,o.j,o.v,o.w,i.i,o.q,o.r,o.t,o.c,i.j,o.u,o.d,o.p],styles:[""]}),x)}],y=((O=function e(){_classCallCheck(this,e)}).\u0275mod=f.Hb({type:O}),O.\u0275inj=f.Gb({factory:function(e){return new(e||O)},imports:[[s.i.forChild(U)],s.i]}),O),L=((_=function e(){_classCallCheck(this,e)}).\u0275mod=f.Hb({type:_}),_.\u0275inj=f.Gb({factory:function(e){return new(e||_)},imports:[[i.b,r.a,o.J,y]]}),_)}}]);