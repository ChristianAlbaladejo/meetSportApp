(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{"7UCR":function(e,n,i){"use strict";i.r(n),i.d(n,"UserPageModule",(function(){return O}));var t=i("ofXK"),o=i("3Pt+"),s=i("TEn/"),r=i("tyNb"),c=i("mrSG"),a=i("qfBg"),b=i("jT/F"),l=i("RfxN"),u=i("fXoL");function d(e,n){if(1&e){const e=u.Nb();u.Mb(0,"ion-button",20),u.Ub("click",(function(){return u.fc(e),u.Wb().edit()})),u.kc(1,"Edit"),u.Lb()}}function g(e,n){if(1&e){const e=u.Nb();u.Mb(0,"ion-button",20),u.Ub("click",(function(){return u.fc(e),u.Wb().save()})),u.kc(1,"Save"),u.Lb()}}function h(e,n){if(1&e&&u.Kb(0,"img",21),2&e){const e=u.Wb();u.cc("src",e.url+"/get-image-user/"+e.user.image,u.gc)}}function f(e,n){1&e&&u.Kb(0,"img",22)}function m(e,n){if(1&e&&(u.Mb(0,"p"),u.Mb(1,"ion-chip",23),u.Mb(2,"ion-label"),u.kc(3),u.Lb(),u.Lb(),u.Mb(4,"ion-chip",23),u.Mb(5,"ion-label"),u.kc(6),u.Lb(),u.Lb(),u.Lb()),2&e){const e=u.Wb();u.zb(3),u.mc("Following \xa0 ",e.stats.following,""),u.zb(3),u.mc("Followed \xa0 ",e.stats.followed,"")}}function p(e,n){1&e&&(u.Mb(0,"span"),u.kc(1," Name is required "),u.Lb())}function M(e,n){1&e&&(u.Mb(0,"span"),u.kc(1," Surname is required "),u.Lb())}function y(e,n){1&e&&(u.Mb(0,"span"),u.kc(1," Nick is required "),u.Lb())}function v(e,n){1&e&&(u.Mb(0,"span"),u.kc(1," Email is required "),u.Lb())}const k=[{path:"",component:(()=>{class e{constructor(e,n,i,t,o,s,r,c){this.navCtrl=e,this.modal=n,this._route=i,this._router=t,this._userService=o,this.alert=s,this.loading=r,this._uploadService=c,this.mode="login",this.user=this._userService.getIdentity(),this.identity=this.user,this.token=this._userService.getToken(),this.editing=!1,this.url="https://api-meet-sport.herokuapp.com/api",this.stats=this._userService.getStats()}ngOnInit(){}edit(){this.editing=!0}getUser(e){return Object(c.a)(this,void 0,void 0,(function*(){this._userService.getUser(e).subscribe(e=>Object(c.a)(this,void 0,void 0,(function*(){if(e.user)console.log(e),this.user=e.user,console.log(this.user);else{const e=yield this.alert.create({message:"Ohh! Something gone wrong. \u{1f625}",buttons:["OK"]});yield e.present()}})),e=>Object(c.a)(this,void 0,void 0,(function*(){const e=yield this.alert.create({message:"Ohh! Something gone wrong. \u{1f625}",buttons:["OK"]});yield e.present()})))}))}save(){return Object(c.a)(this,void 0,void 0,(function*(){if(""==this.user.name||""==this.user.surname||""==this.user.nick||""==this.user.email){const e=yield this.alert.create({message:"Ohh! Something gone wrong. \u{1f625}",buttons:["OK"]});this.getUser(this.identity._id),yield e.present()}else{let e=this.loading.create({message:"Please wait..."});(yield e).present(),this._userService.updateUser(this.user).subscribe(n=>Object(c.a)(this,void 0,void 0,(function*(){if(n.user)localStorage.setItem("identify",JSON.stringify(this.user)),this.identity=this.user,this._uploadService.makeFileRequest(this.url+"/upload-image-user/"+this.user._id,[],this.filesToUpload,this.token,"image").then(e=>{console.log(e),this.user.image=e.user.image,localStorage.setItem("identify",JSON.stringify(this.user))});else{const e=yield this.alert.create({message:"Ohh! Something gone wrong. \u{1f625}",buttons:["OK"]});yield e.present()}(yield e).dismiss()})),n=>Object(c.a)(this,void 0,void 0,(function*(){if(null!=n){const n=yield this.alert.create({message:"Ohh! Something gone wrong. \u{1f625}",buttons:["OK"]});(yield e).dismiss(),yield n.present()}}))),this.editing=!1}}))}following(){return Object(c.a)(this,void 0,void 0,(function*(){const e=yield this.modal.create({component:l.a,componentProps:{user:this.user}});return yield e.present()}))}fileChangeEvent(e){this.filesToUpload=e.target.files,console.log(this.filesToUpload)}takePicture(){return Object(c.a)(this,void 0,void 0,(function*(){}))}}return e.\u0275fac=function(n){return new(n||e)(u.Jb(s.O),u.Jb(s.N),u.Jb(r.a),u.Jb(r.g),u.Jb(a.a),u.Jb(s.a),u.Jb(s.L),u.Jb(b.a))},e.\u0275cmp=u.Db({type:e,selectors:[["app-user"]],features:[u.yb([a.a,b.a])],decls:44,vars:18,consts:[["slot","start","color","success"],["slot","end"],[3,"click",4,"ngIf"],["fullscreen",""],["id","container"],["class","imageUser",3,"src",4,"ngIf"],["src","../../assets/no-user.webp",4,"ngIf"],[4,"ngIf"],["type","file","name","file","id","file",1,"fileInput",3,"disabled","change"],["for","file"],["name","images"],["stacked",""],["name","name","type","text","required","",3,"ngModel","readonly","ngModelChange"],["name","ngModel"],["name","surname","type","text","required","",3,"ngModel","readonly","ngModelChange"],["surname","ngModel"],["name","nick","type","text","required","",3,"ngModel","readonly","ngModelChange"],["nick","ngModel"],["name","email","type","text","required","",3,"ngModel","readonly","ngModelChange"],["email","ngModel"],[3,"click"],[1,"imageUser",3,"src"],["src","../../assets/no-user.webp"],["outline","","color","secondary"]],template:function(e,n){if(1&e&&(u.Mb(0,"ion-header"),u.Mb(1,"ion-toolbar"),u.Mb(2,"ion-buttons",0),u.Kb(3,"ion-menu-button"),u.Lb(),u.Mb(4,"ion-title"),u.kc(5,"User"),u.Lb(),u.Mb(6,"ion-buttons",1),u.ic(7,d,2,0,"ion-button",2),u.ic(8,g,2,0,"ion-button",2),u.Lb(),u.Lb(),u.Lb(),u.Mb(9,"ion-content",3),u.Mb(10,"div",4),u.Mb(11,"ion-card"),u.ic(12,h,1,1,"img",5),u.ic(13,f,1,0,"img",6),u.ic(14,m,7,2,"p",7),u.Mb(15,"ion-item"),u.Mb(16,"input",8),u.Ub("change",(function(e){return n.fileChangeEvent(e)})),u.Lb(),u.Mb(17,"label",9),u.Kb(18,"ion-icon",10),u.kc(19," Chage user image "),u.Lb(),u.Lb(),u.Mb(20,"ion-item"),u.Mb(21,"ion-label",11),u.kc(22,"Name: "),u.Lb(),u.Mb(23,"ion-input",12,13),u.Ub("ngModelChange",(function(e){return n.identity.name=e})),u.Lb(),u.ic(25,p,2,0,"span",7),u.Lb(),u.Mb(26,"ion-item"),u.Mb(27,"ion-label",11),u.kc(28,"Surname: "),u.Lb(),u.Mb(29,"ion-input",14,15),u.Ub("ngModelChange",(function(e){return n.identity.surname=e})),u.Lb(),u.ic(31,M,2,0,"span",7),u.Lb(),u.Mb(32,"ion-item"),u.Mb(33,"ion-label",11),u.kc(34,"Nick: "),u.Lb(),u.Mb(35,"ion-input",16,17),u.Ub("ngModelChange",(function(e){return n.identity.nick=e})),u.Lb(),u.ic(37,y,2,0,"span",7),u.Lb(),u.Mb(38,"ion-item"),u.Mb(39,"ion-label",11),u.kc(40,"Email: "),u.Lb(),u.Mb(41,"ion-input",18,19),u.Ub("ngModelChange",(function(e){return n.identity.email=e})),u.Lb(),u.ic(43,v,2,0,"span",7),u.Lb(),u.Lb(),u.Lb(),u.Lb()),2&e){const e=u.ec(24),i=u.ec(30),t=u.ec(36),o=u.ec(42);u.zb(7),u.bc("ngIf",!n.editing),u.zb(1),u.bc("ngIf",n.editing),u.zb(4),u.bc("ngIf",n.user.image),u.zb(1),u.bc("ngIf",!n.user.image),u.zb(1),u.bc("ngIf",n.stats),u.zb(2),u.bc("disabled",!n.editing),u.zb(7),u.bc("ngModel",n.identity.name)("readonly",!n.editing),u.zb(2),u.bc("ngIf",!e.value&&e.touched),u.zb(4),u.bc("ngModel",n.identity.surname)("readonly",!n.editing),u.zb(2),u.bc("ngIf",!i.value&&i.touched),u.zb(4),u.bc("ngModel",n.identity.nick)("readonly",!n.editing),u.zb(2),u.bc("ngIf",!t.value&&t.touched),u.zb(4),u.bc("ngModel",n.identity.email)("readonly",!n.editing),u.zb(2),u.bc("ngIf",!o.value&&o.touched)}},directives:[s.o,s.I,s.e,s.y,s.H,t.j,s.j,s.f,s.t,s.p,s.u,s.s,s.T,o.h,o.c,o.f,s.d,s.h],styles:[".fileInput[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}.fileInput[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#717171;background-color:#fff;display:inline-block;padding:.5em 1em;border:1px solid #ccc;cursor:pointer}.imageUser[_ngcontent-%COMP%]{width:100%;height:18rem}#container[_ngcontent-%COMP%]{max-width:500px;margin:auto}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]}),e})()}];let L=(()=>{class e{}return e.\u0275mod=u.Hb({type:e}),e.\u0275inj=u.Gb({factory:function(n){return new(n||e)},imports:[[r.i.forChild(k)],r.i]}),e})(),O=(()=>{class e{}return e.\u0275mod=u.Hb({type:e}),e.\u0275inj=u.Gb({factory:function(n){return new(n||e)},imports:[[t.b,o.a,s.J,L]]}),e})()}}]);