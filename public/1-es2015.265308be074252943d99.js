(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{MnDo:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i("tk/3"),o=i("fXoL");let s=(()=>{class t{constructor(t){this._http=t,this.url="https://api-meet-sport.herokuapp.com/api"}addFollow(t,e){let i=JSON.stringify(e),o=(new n.c).set("Content-Type","application/json").set("Authorization",t);return this._http.post(this.url+"/follow",i,{headers:o})}deleteFollow(t,e){let i=(new n.c).set("Content-Type","application/json").set("Authorization",t);return this._http.delete(this.url+"/deleteFollow/"+e,{headers:i})}getFollowing(t,e=null,i=1){let o=(new n.c).set("Content-Type","application/json").set("Authorization",t);return this._http.get(this.url+"/following/"+e+"/"+i,{headers:o})}getMyFollows(t){let e=(new n.c).set("Content-Type","application/json").set("Authorization",t);return this._http.get(this.url+"/get-my-follows/true",{headers:e})}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(n.a))},t.\u0275prov=o.Fb({token:t,factory:t.\u0275fac}),t})()},QLMG:function(t,e,i){"use strict";i.d(e,"a",(function(){return v}));var n=i("mrSG"),o=i("qfBg"),s=i("jT/F"),c=i("RfxN"),l=i("fXoL"),r=i("TEn/"),a=i("tyNb"),b=i("ofXK"),u=i("3Pt+");function h(t,e){if(1&t&&l.Kb(0,"img",18),2&t){const t=l.Wb();l.cc("src",t.url+"/get-image-user/"+t.user.image,l.gc)}}function g(t,e){1&t&&l.Kb(0,"img",19)}function d(t,e){if(1&t&&(l.Mb(0,"p"),l.Mb(1,"ion-chip",20),l.Mb(2,"ion-label"),l.kc(3),l.Lb(),l.Lb(),l.Mb(4,"ion-chip",20),l.Mb(5,"ion-label"),l.kc(6),l.Lb(),l.Lb(),l.Lb()),2&t){const t=l.Wb();l.zb(3),l.mc("Following \xa0 ",t.stats.following,""),l.zb(3),l.mc("Followed \xa0 ",t.stats.followed,"")}}function f(t,e){1&t&&(l.Mb(0,"span"),l.kc(1," Name is required "),l.Lb())}function p(t,e){1&t&&(l.Mb(0,"span"),l.kc(1," Surname is required "),l.Lb())}function m(t,e){1&t&&(l.Mb(0,"span"),l.kc(1," Nick is required "),l.Lb())}function w(t,e){1&t&&(l.Mb(0,"span"),l.kc(1," Email is required "),l.Lb())}let v=(()=>{class t{constructor(t,e,i,n,o,s,c,l,r){this.navParams=t,this.navCtrl=e,this.modalController=i,this._route=n,this._router=o,this._userService=s,this.alert=c,this.loading=l,this._uploadService=r,this.mode="login",this.user=this.navParams.get("user"),console.log(this.user,"aa"),this.getUser(this.user._id),this.token=this._userService.getToken(),this.url="https://api-meet-sport.herokuapp.com/api",this.getCounters(this.user._id)}ngOnInit(){}getUser(t){this._userService.getUser(t).subscribe(t=>Object(n.a)(this,void 0,void 0,(function*(){if(t.user)console.log(t),this.user=t.user,console.log(this.user);else{const t=yield this.alert.create({message:"Ohh! Something gone wrong. \u{1f625}",buttons:["OK"]});console.log("problemo"),yield t.present()}})),t=>Object(n.a)(this,void 0,void 0,(function*(){const t=yield this.alert.create({message:"Ohh! Something gone wrong. \u{1f625}",buttons:["OK"]});yield t.present()})))}getCounters(t){this._userService.getCounters(t).subscribe(t=>{this.stats=t},t=>{console.log(t)})}dismiss(){this.modalController.dismiss()}following(){return Object(n.a)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:c.a,componentProps:{user:this.user}});return yield t.present()}))}}return t.\u0275fac=function(e){return new(e||t)(l.Jb(r.P),l.Jb(r.O),l.Jb(r.N),l.Jb(a.a),l.Jb(a.g),l.Jb(o.a),l.Jb(r.a),l.Jb(r.L),l.Jb(s.a))},t.\u0275cmp=l.Db({type:t,selectors:[["app-other-user"]],features:[l.yb([o.a,s.a])],decls:38,vars:11,consts:[["color","success"],["slot","start"],[3,"click"],["name","chevron-back-outline"],["fullscreen",""],["id","container"],["class","imageUser",3,"src",4,"ngIf"],["src","../../assets/no-user.webp",4,"ngIf"],[4,"ngIf"],["stacked",""],["name","name","type","text","required","",3,"ngModel","ngModelChange"],["name","ngModel"],["name","surname","type","text","required","",3,"ngModel","ngModelChange"],["surname","ngModel"],["name","nick","type","text","required","",3,"ngModel","ngModelChange"],["nick","ngModel"],["name","email","type","text","required","",3,"ngModel","ngModelChange"],["email","ngModel"],[1,"imageUser",3,"src"],["src","../../assets/no-user.webp"],["outline","","color","secondary"]],template:function(t,e){if(1&t&&(l.Mb(0,"ion-header"),l.Mb(1,"ion-toolbar",0),l.Mb(2,"ion-buttons",1),l.Mb(3,"ion-button",2),l.Ub("click",(function(){return e.dismiss()})),l.Kb(4,"ion-icon",3),l.kc(5,"Back "),l.Lb(),l.Lb(),l.Mb(6,"ion-title"),l.kc(7,"User"),l.Lb(),l.Lb(),l.Lb(),l.Mb(8,"ion-content",4),l.Mb(9,"div",5),l.Mb(10,"ion-card"),l.ic(11,h,1,1,"img",6),l.ic(12,g,1,0,"img",7),l.ic(13,d,7,2,"p",8),l.Mb(14,"ion-item"),l.Mb(15,"ion-label",9),l.kc(16,"Name: "),l.Lb(),l.Mb(17,"ion-input",10,11),l.Ub("ngModelChange",(function(t){return e.user.name=t})),l.Lb(),l.ic(19,f,2,0,"span",8),l.Lb(),l.Mb(20,"ion-item"),l.Mb(21,"ion-label",9),l.kc(22,"Surname: "),l.Lb(),l.Mb(23,"ion-input",12,13),l.Ub("ngModelChange",(function(t){return e.user.surname=t})),l.Lb(),l.ic(25,p,2,0,"span",8),l.Lb(),l.Mb(26,"ion-item"),l.Mb(27,"ion-label",9),l.kc(28,"Nick: "),l.Lb(),l.Mb(29,"ion-input",14,15),l.Ub("ngModelChange",(function(t){return e.user.nick=t})),l.Lb(),l.ic(31,m,2,0,"span",8),l.Lb(),l.Mb(32,"ion-item"),l.Mb(33,"ion-label",9),l.kc(34,"Email: "),l.Lb(),l.Mb(35,"ion-input",16,17),l.Ub("ngModelChange",(function(t){return e.user.email=t})),l.Lb(),l.ic(37,w,2,0,"span",8),l.Lb(),l.Lb(),l.Lb(),l.Lb()),2&t){const t=l.ec(18),i=l.ec(24),n=l.ec(30),o=l.ec(36);l.zb(11),l.bc("ngIf",e.user.image),l.zb(1),l.bc("ngIf",!e.user.image),l.zb(1),l.bc("ngIf",e.stats),l.zb(4),l.bc("ngModel",e.user.name),l.zb(2),l.bc("ngIf",!t.value&&t.touched),l.zb(4),l.bc("ngModel",e.user.surname),l.zb(2),l.bc("ngIf",!i.value&&i.touched),l.zb(4),l.bc("ngModel",e.user.nick),l.zb(2),l.bc("ngIf",!n.value&&n.touched),l.zb(4),l.bc("ngModel",e.user.email),l.zb(2),l.bc("ngIf",!o.value&&o.touched)}},directives:[r.o,r.I,r.e,r.d,r.p,r.H,r.j,r.f,b.j,r.t,r.u,r.s,r.T,u.h,u.c,u.f,r.h],styles:["#container[_ngcontent-%COMP%]{max-width:500px;margin:auto}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.imageUser[_ngcontent-%COMP%]{width:100%;height:18rem}"]}),t})()},RfxN:function(t,e,i){"use strict";i.d(e,"a",(function(){return k}));var n=i("mrSG"),o=i("nAqH"),s=i("qfBg"),c=i("MnDo"),l=i("ncJE"),r=i("fXoL"),a=i("TEn/"),b=i("tyNb"),u=i("ofXK");function h(t,e){if(1&t){const t=r.Nb();r.Mb(0,"img",10),r.Ub("click",(function(){r.fc(t);const e=r.Wb().$implicit;return r.Wb(2).loadUser(e.followed)})),r.Lb()}if(2&t){const t=r.Wb().$implicit,e=r.Wb(2);r.cc("src",e.url+"/get-image-user/"+t.followed.image,r.gc)}}function g(t,e){if(1&t){const t=r.Nb();r.Mb(0,"img",11),r.Ub("click",(function(){r.fc(t);const e=r.Wb().$implicit;return r.Wb(2).loadUser(e.followed)})),r.Lb()}}function d(t,e){if(1&t){const t=r.Nb();r.Mb(0,"ion-button",15),r.Ub("click",(function(){r.fc(t);const e=r.Wb(2).$implicit;return r.Wb(2).followUser(e.followed._id)})),r.Kb(1,"ion-icon",16),r.kc(2," \xa0 Follow "),r.Lb()}}function f(t,e){1&t&&(r.Mb(0,"span"),r.Kb(1,"ion-icon",20),r.kc(2," \xa0 Unfollow "),r.Lb())}function p(t,e){1&t&&(r.Kb(0,"ion-icon",21),r.kc(1," \xa0 Following "))}function m(t,e){if(1&t){const t=r.Nb();r.Mb(0,"ion-button",17),r.Ub("mouseover",(function(){r.fc(t);const e=r.Wb(2).$implicit;return r.Wb(2).mouseEnter(e.followed._id)}))("mouseleave",(function(){r.fc(t);const e=r.Wb(4);return e.mouseLeave(e.user._id)}))("click",(function(){r.fc(t);const e=r.Wb(2).$implicit;return r.Wb(2).unfollowUser(e.followed._id)})),r.ic(1,f,3,0,"span",18),r.ic(2,p,2,0,"ng-template",null,19,r.jc),r.Lb()}if(2&t){const t=r.ec(3),e=r.Wb(2).$implicit,i=r.Wb(2);r.bc("color",e.followed._id==i.followUserOver?"primary":"secondary"),r.zb(1),r.bc("ngIf",i.user._id==i.followUserOver)("ngIfElse",t)}}function w(t,e){if(1&t&&(r.Mb(0,"div",12),r.ic(1,d,3,0,"ion-button",13),r.ic(2,m,4,3,"ion-button",14),r.Lb()),2&t){const t=r.Wb().$implicit,e=r.Wb(2);r.zb(1),r.bc("ngIf",e.follows.indexOf(t.followed._id)<0),r.zb(1),r.bc("ngIf",e.follows.indexOf(t.followed._id)>=0)}}function v(t,e){if(1&t){const t=r.Nb();r.Mb(0,"ion-item"),r.Mb(1,"ion-avatar",5),r.ic(2,h,1,1,"img",6),r.ic(3,g,1,0,"img",7),r.Lb(),r.Mb(4,"ion-label"),r.Mb(5,"h2",8),r.Ub("click",(function(){r.fc(t);const i=e.$implicit;return r.Wb(2).loadUser(i.followed)})),r.kc(6),r.Lb(),r.Mb(7,"h3",8),r.Ub("click",(function(){r.fc(t);const i=e.$implicit;return r.Wb(2).loadUser(i.followed)})),r.kc(8),r.Lb(),r.Mb(9,"p",8),r.Ub("click",(function(){r.fc(t);const i=e.$implicit;return r.Wb(2).loadUser(i.followed)})),r.kc(10),r.Lb(),r.ic(11,w,3,2,"div",9),r.Lb(),r.Lb()}if(2&t){const t=e.$implicit,i=r.Wb(2);r.zb(2),r.bc("ngIf",t.followed.image),r.zb(1),r.bc("ngIf",!t.followed.image),r.zb(3),r.lc(t.followed.name+" "+t.followed.surname),r.zb(2),r.lc(t.followed.nick),r.zb(2),r.lc(t.followed.email),r.zb(1),r.bc("ngIf",t.followed._id!=i.identity._id)}}function M(t,e){if(1&t&&(r.Mb(0,"div"),r.Mb(1,"ion-list"),r.Mb(2,"ion-list-header"),r.kc(3," People "),r.Lb(),r.ic(4,v,12,6,"ion-item",4),r.Lb(),r.Lb()),2&t){const t=r.Wb();r.zb(4),r.bc("ngForOf",t.following)}}let k=(()=>{class t{constructor(t,e,i,n,o,s,c,l,r){this.navParams=t,this.modal=e,this._route=i,this._router=n,this._userService=o,this.alert=s,this.loading=c,this.navCtrl=l,this._followService=r,this.page=1,this.identity=this._userService.getIdentity(),this.token=this._userService.getToken(),this.url="https://api-meet-sport.herokuapp.com/api",this.user=this.navParams.get("user"),console.log(this.user,"asdasd")}ngOnInit(){this.getFollows(this.user._id,1)}getFollows(t,e){return Object(n.a)(this,void 0,void 0,(function*(){let i=this.loading.create({message:"Please wait..."});(yield i).present(),this._followService.getFollowing(this.token,t,e).subscribe(t=>Object(n.a)(this,void 0,void 0,(function*(){if(t.follows)console.log(t,"aaaaa"),this.total=t.total,this.following=t.following,this.pages=t.pages,this.follows=t.user_following(yield i).dismiss();else{const t=yield this.alert.create({message:"Ohh! Something gone wrong. \u{1f625}",buttons:["OK"]});(yield i).dismiss(),yield t.present()}})),t=>Object(n.a)(this,void 0,void 0,(function*(){var e=t;if(console.log(e),null!=e){const t=yield this.alert.create({message:"Ohh! Something gone wrongg. \u{1f625}",buttons:["OK"]});(yield i).dismiss(),yield t.present()}})))}))}mouseEnter(t){this.followUserOver=t}mouseLeave(t){this.followUserOver=0}followUser(t){var e=new o.a("",this.identity._id,t);this._followService.addFollow(this.token,e).subscribe(e=>Object(n.a)(this,void 0,void 0,(function*(){if(e.follow)this.follows.push(t);else{const t=yield this.alert.create({message:"Ohh! Something gone wrong. \u{1f625}",buttons:["OK"]});yield t.present()}})),t=>Object(n.a)(this,void 0,void 0,(function*(){const t=yield this.alert.create({message:"Ohh! Something gone wrong. \u{1f625}",buttons:["OK"]});yield t.present()})))}unfollowUser(t){this._followService.deleteFollow(this.token,t).subscribe(e=>{var i=this.follows.indexOf(t);-1!=i&&this.follows.splice(i,1)},t=>Object(n.a)(this,void 0,void 0,(function*(){const t=yield this.alert.create({message:"Ohh! Something gone wrong. \u{1f625}",buttons:["OK"]});yield t.present()})))}doInfinite(t){this.page++}loadUser(t){return Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.modal.create({component:l.a,componentProps:{user:t}});return yield e.present()}))}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(a.P),r.Jb(a.N),r.Jb(b.a),r.Jb(b.g),r.Jb(s.a),r.Jb(a.a),r.Jb(a.L),r.Jb(a.O),r.Jb(c.a))},t.\u0275cmp=r.Db({type:t,selectors:[["app-follow-following"]],features:[r.yb([s.a,c.a])],decls:10,vars:2,consts:[["slot","start","color","success"],[3,"fullscreen"],[4,"ngIf"],[3,"ionInfinite"],[4,"ngFor","ngForOf"],["slot","start"],[3,"src","click",4,"ngIf"],["src","../../assets/no-user.webp",3,"click",4,"ngIf"],[3,"click"],["class","followButton",4,"ngIf"],[3,"src","click"],["src","../../assets/no-user.webp",3,"click"],[1,"followButton"],["color","success",3,"click",4,"ngIf"],["ion-button","",3,"color","mouseover","mouseleave","click",4,"ngIf"],["color","success",3,"click"],["name","add-circle-outline"],["ion-button","",3,"color","mouseover","mouseleave","click"],[4,"ngIf","ngIfElse"],["following",""],["name","close-circle-outline"],["name","checkmark-circle-outline"]],template:function(t,e){1&t&&(r.Mb(0,"ion-header"),r.Mb(1,"ion-toolbar"),r.Mb(2,"ion-buttons",0),r.Kb(3,"ion-menu-button"),r.Lb(),r.Mb(4,"ion-title"),r.kc(5,"People"),r.Lb(),r.Lb(),r.Lb(),r.Mb(6,"ion-content",1),r.ic(7,M,5,1,"div",2),r.Mb(8,"ion-infinite-scroll",3),r.Ub("ionInfinite",(function(t){return e.doInfinite(t)})),r.Kb(9,"ion-infinite-scroll-content"),r.Lb(),r.Lb()),2&t&&(r.zb(6),r.bc("fullscreen",!0),r.zb(1),r.bc("ngIf",e.following))},directives:[a.o,a.I,a.e,a.y,a.H,a.j,u.j,a.q,a.r,a.v,a.w,u.i,a.t,a.c,a.u,a.d,a.p],styles:[""]}),t})()},dnnk:function(t,e,i){"use strict";i.d(e,"a",(function(){return p}));var n=i("mrSG"),o=i("qfBg"),s=i("MnDo"),c=i("wzbf"),l=i("tBOM"),r=i("fXoL"),a=i("TEn/"),b=i("tyNb"),u=i("ofXK"),h=i("3Pt+");function g(t,e){if(1&t){const t=r.Nb();r.Mb(0,"ion-button",2),r.Ub("click",(function(){return r.fc(t),r.Wb().delete()})),r.Kb(1,"ion-icon",11),r.Lb()}}function d(t,e){if(1&t&&r.Kb(0,"img",12),2&t){const t=r.Wb();r.cc("src",t.url+"/get-image-user/"+t.publication.user.image,r.gc)}}function f(t,e){1&t&&r.Kb(0,"img",13)}let p=(()=>{class t{constructor(t,e,i,n,o,s,c,l,r,a,b){this.modalController=t,this._publicationService=e,this.navParams=i,this._route=n,this._router=o,this._userService=s,this.alert=c,this.loading=l,this.navCtrl=r,this._followService=a,this._googleMaps=b,this.mapRef=null,this.identity=this._userService.getIdentity(),this.token=this._userService.getToken(),this.url="https://api-meet-sport.herokuapp.com/api",this.publication=this.navParams.get("publication"),this.times=this.navParams.get("times"),console.log(this.times)}ngOnInit(){}ionViewDidEnter(){this.loadMap()}goBack(){this.modalController.dismiss()}loadMap(){return Object(n.a)(this,void 0,void 0,(function*(){let t=this.publication.location.split(","),e={lat:t[0],lng:t[1]};var i=new google.maps.LatLng(e.lat,e.lng);const n=i,o=document.getElementById("map");this.mapRef=new google.maps.Map(o,{center:n,zoom:12}),new google.maps.Marker({position:i,map:this.mapRef,animation:google.maps.Animation.DROP})}))}delete(){return Object(n.a)(this,void 0,void 0,(function*(){let t=this.alert.create({header:"Confirm delete publication",message:"Are you sure you want to delete the publication?",buttons:[{text:"Cancel",role:"cancel",handler:()=>{}},{text:"Accept",handler:()=>{this._publicationService.deletePublication(this.token,this.publication._id).subscribe(t=>{},t=>Object(n.a)(this,void 0,void 0,(function*(){const t=yield this.alert.create({message:"Ohh! Something gone wrong. \u{1f625}",buttons:["OK"]});yield t.present()}))),this.modalController.dismiss()}}]});(yield t).present()}))}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(a.N),r.Jb(c.a),r.Jb(a.P),r.Jb(b.a),r.Jb(b.g),r.Jb(o.a),r.Jb(a.a),r.Jb(a.L),r.Jb(a.O),r.Jb(s.a),r.Jb(l.a))},t.\u0275cmp=r.Db({type:t,selectors:[["app-publication"]],features:[r.yb([o.a,s.a,c.a])],decls:32,vars:13,consts:[["color","success"],["slot","start"],[3,"click"],["name","chevron-back-outline"],["slot","end"],[3,"click",4,"ngIf"],[3,"src",4,"ngIf"],["src","../../assets/no-user.webp",4,"ngIf"],["name","text","type","text-area","required","",3,"ngModel","ngModelChange"],["text","ngModel"],["id","map"],["name","trash-outline"],[3,"src"],["src","../../assets/no-user.webp"]],template:function(t,e){1&t&&(r.Mb(0,"ion-header"),r.Mb(1,"ion-toolbar",0),r.Mb(2,"ion-buttons",1),r.Mb(3,"ion-button",2),r.Ub("click",(function(){return e.goBack()})),r.Kb(4,"ion-icon",3),r.kc(5,"Back "),r.Lb(),r.Lb(),r.Mb(6,"ion-title"),r.kc(7,"Publication"),r.Lb(),r.Mb(8,"ion-buttons",4),r.ic(9,g,2,0,"ion-button",5),r.Lb(),r.Lb(),r.Lb(),r.Mb(10,"ion-content"),r.Mb(11,"ion-item"),r.Mb(12,"ion-avatar",1),r.ic(13,d,1,1,"img",6),r.ic(14,f,1,0,"img",7),r.Lb(),r.Mb(15,"ion-label"),r.Mb(16,"h3"),r.kc(17),r.Xb(18,"date"),r.Lb(),r.Mb(19,"h3"),r.kc(20),r.Lb(),r.Mb(21,"h3"),r.kc(22),r.Xb(23,"date"),r.Lb(),r.Lb(),r.Lb(),r.Mb(24,"ion-item"),r.Mb(25,"ion-label"),r.kc(26,"What are you going to do?"),r.Lb(),r.Lb(),r.Mb(27,"ion-item"),r.Mb(28,"ion-textarea",8,9),r.Ub("ngModelChange",(function(t){return e.publication.text=t})),r.Lb(),r.Lb(),r.Kb(30,"ion-item"),r.Kb(31,"div",10),r.Lb()),2&t&&(r.zb(9),r.bc("ngIf",e.publication.user._id==e.identity._id),r.zb(4),r.bc("ngIf",e.publication.user.image),r.zb(1),r.bc("ngIf",!e.publication.user.image),r.zb(3),r.nc("",(null==e.publication?null:e.publication.user.name)+" "+(null==e.publication?null:e.publication.user.surname)+" ","| \xa0",r.Yb(18,9," "+(null==e.publication?null:e.publication.created_at)),""),r.zb(3),r.lc(null==e.publication?null:e.publication.text),r.zb(2),r.nc("Date of exit: ",r.Yb(23,11,null==e.times?null:e.times.date)," \xa0 ",null==e.times?null:e.times.hour,""),r.zb(6),r.bc("ngModel",e.publication.text))},directives:[a.o,a.I,a.e,a.d,a.p,a.H,u.j,a.j,a.t,a.c,a.u,a.G,a.T,h.h,h.c,h.f],pipes:[u.d],styles:["#map[_ngcontent-%COMP%]{width:100%;height:100%}"]}),t})()},"jT/F":function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i("fXoL");let o=(()=>{class t{constructor(){this.url="https://api-meet-sport.herokuapp.com/api"}makeFileRequest(t,e,i,n,o){return new Promise((function(e,s){var c=new FormData,l=new XMLHttpRequest;for(let t=0;t<i.length;t++)c.append(o,i[t],i[t].name);l.onreadystatechange=function(){4==l.readyState&&(200==l.status?e(JSON.parse(l.response)):s(l.response))},l.open("POST",t,!0),l.setRequestHeader("Authorization",n),l.send(c)}))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=n.Fb({token:t,factory:t.\u0275fac}),t})()},nAqH:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));class n{constructor(t,e,i){this._id=t,this.user=e,this.followed=i}}},ncJE:function(t,e,i){"use strict";i.d(e,"a",(function(){return S}));var n=i("mrSG"),o=i("nAqH"),s=i("qfBg"),c=i("MnDo"),l=i("wzbf"),r=i("tBOM"),a=i("dnnk"),b=i("QLMG"),u=i("fXoL"),h=i("TEn/"),g=i("tyNb"),d=i("ofXK");function f(t,e){if(1&t){const t=u.Nb();u.Mb(0,"img",13),u.Ub("click",(function(){u.fc(t);const e=u.Wb(2);return e.goUser(e.user)})),u.Lb()}if(2&t){const t=u.Wb(2);u.cc("src",t.url+"/get-image-user/"+t.user.image,u.gc)}}function p(t,e){if(1&t){const t=u.Nb();u.Mb(0,"img",14),u.Ub("click",(function(){u.fc(t);const e=u.Wb(2);return e.goUser(e.user)})),u.Lb()}}function m(t,e){1&t&&(u.Mb(0,"ion-button",15),u.kc(1,"Te sigue"),u.Lb())}function w(t,e){if(1&t){const t=u.Nb();u.Mb(0,"ion-button",16),u.Ub("click",(function(){u.fc(t);const e=u.Wb(2);return e.followUser(e.user._id)})),u.kc(1,"Follow"),u.Lb()}}function v(t,e){1&t&&(u.Mb(0,"span"),u.kc(1," Unfollow "),u.Lb())}function M(t,e){1&t&&u.kc(0," Following ")}function k(t,e){if(1&t){const t=u.Nb();u.Mb(0,"ion-button",17),u.Ub("click",(function(){u.fc(t);const e=u.Wb(2);return e.unfollowUser(e.user._id)}))("mouseenter",(function(){u.fc(t);const e=u.Wb(2);return e.mouseEnter(e.user._id)}))("mouseleave",(function(){return u.fc(t),u.Wb(2).mouseLeave()})),u.ic(1,v,2,0,"span",18),u.ic(2,M,1,0,"ng-template",null,19,u.jc),u.Lb()}if(2&t){const t=u.ec(3),e=u.Wb(2);u.bc("color",e.user._id==e.followUserOver?"primary":"warning"),u.zb(1),u.bc("ngIf",e.user._id==e.followUserOver)("ngIfElse",t)}}function L(t,e){if(1&t&&(u.Mb(0,"ion-item"),u.Mb(1,"ion-avatar",1),u.ic(2,f,1,1,"img",8),u.ic(3,p,1,0,"img",9),u.Lb(),u.Mb(4,"ion-label"),u.ic(5,m,2,0,"ion-button",10),u.Mb(6,"h3"),u.kc(7),u.Lb(),u.Mb(8,"h3"),u.kc(9),u.Lb(),u.Lb(),u.ic(10,w,2,0,"ion-button",11),u.ic(11,k,4,3,"ion-button",12),u.Lb()),2&t){const t=u.Wb();u.zb(2),u.bc("ngIf",t.user.image),u.zb(1),u.bc("ngIf",!t.user.image),u.zb(2),u.bc("ngIf",t.followed),u.zb(2),u.lc((null==t.user?null:t.user.name)+" "+(null==t.user?null:t.user.surname)),u.zb(2),u.lc(null==t.user?null:t.user.nick),u.zb(1),u.bc("ngIf",!t.following),u.zb(1),u.bc("ngIf",t.following)}}function y(t,e){if(1&t&&u.Kb(0,"img",28),2&t){const t=u.Wb().$implicit,e=u.Wb(2);u.cc("src",e.url+"/get-image-user/"+t.user.image,u.gc)}}function _(t,e){1&t&&u.Kb(0,"img",29)}function O(t,e){if(1&t){const t=u.Nb();u.Mb(0,"ion-button",2),u.Ub("click",(function(){u.fc(t);const e=u.Wb().$implicit;return u.Wb(2).like(e)})),u.kc(1,"Subscribe "),u.Lb()}}function I(t,e){if(1&t){const t=u.Nb();u.Mb(0,"ion-button",30),u.Ub("click",(function(){u.fc(t);const e=u.Wb().$implicit;return u.Wb(2).dislike(e)})),u.kc(1,"Unsubscribe "),u.Lb()}}function z(t,e){if(1&t){const t=u.Nb();u.Mb(0,"div",22),u.Mb(1,"ion-card"),u.Mb(2,"ion-item"),u.Mb(3,"ion-avatar",1),u.ic(4,y,1,1,"img",23),u.ic(5,_,1,0,"img",24),u.Lb(),u.Mb(6,"ion-label"),u.Mb(7,"h3"),u.kc(8),u.Xb(9,"date"),u.Lb(),u.Mb(10,"h3"),u.kc(11),u.Lb(),u.Mb(12,"h3"),u.kc(13),u.Xb(14,"date"),u.Lb(),u.Lb(),u.Lb(),u.Mb(15,"ion-card-content",2),u.Ub("click",(function(){u.fc(t);const i=e.$implicit;return u.Wb(2).openPublication(i)})),u.Kb(16,"div",25),u.Lb(),u.Mb(17,"ion-grid"),u.Mb(18,"ion-row"),u.Kb(19,"ion-col"),u.Mb(20,"ion-col"),u.ic(21,O,2,0,"ion-button",26),u.ic(22,I,2,0,"ion-button",27),u.Lb(),u.Kb(23,"ion-col"),u.Lb(),u.Lb(),u.Lb(),u.Lb()}if(2&t){const t=e.$implicit,i=e.index,n=u.Wb(2);u.zb(4),u.bc("ngIf",t.user.image),u.zb(1),u.bc("ngIf",!t.user.image),u.zb(3),u.nc("",(null==t?null:t.user.name)+" "+(null==t?null:t.user.surname)+" ","| \xa0",u.Yb(9,10," "+(null==t?null:t.created_at)),""),u.zb(3),u.lc(null==t?null:t.text),u.zb(2),u.nc("Date of exit: ",u.Yb(14,12,null==n.times[i]?null:n.times[i].date)," \xa0 ",null==n.times[i]?null:n.times[i].hour,""),u.zb(3),u.cc("id","map"+i),u.zb(5),u.bc("ngIf",!n.checkIfExists(t)),u.zb(1),u.bc("ngIf",n.checkIfExists(t))}}function U(t,e){1&t&&(u.Mb(0,"div",31),u.Mb(1,"strong"),u.kc(2,"You have no publications"),u.Lb(),u.Mb(3,"p"),u.kc(4,"You can create them or follow people to see them"),u.Lb(),u.Lb())}function C(t,e){if(1&t&&(u.Mb(0,"div"),u.ic(1,z,24,14,"div",20),u.ic(2,U,5,0,"div",21),u.Lb()),2&t){const t=u.Wb();u.zb(1),u.bc("ngForOf",t.publications),u.zb(1),u.bc("ngIf",0==t.publications.length)}}let S=(()=>{class t{constructor(t,e,i,n,o,s,c,l,r,a,b,u){this.navParams=t,this.modalController=e,this._googleMaps=i,this._publicationService=n,this.modal=o,this._route=s,this._router=c,this._userService=l,this._followUser=r,this.alert=a,this.loading=b,this.navCtrl=u,this.followed=!1,this.following=!1,this.coords=[],this.markers=[],this.maps=[],this.page=1,this.times=[],this.identity=this._userService.getIdentity(),this.token=this._userService.getToken(),this.url="https://api-meet-sport.herokuapp.com/api",this.user=this.navParams.get("user")}ngOnInit(){google.maps.event.addDomListener(window,"load",this.getPublications(this.page))}getUser(t){this._userService.getUser(t).subscribe(t=>Object(n.a)(this,void 0,void 0,(function*(){if(t.user)console.log(t),this.user=t.user,console.log(this.user),this.following=!(!t.following||!t.following._id),this.followed=!(!t.followed||!t.followed._id);else{const t=yield this.alert.create({message:"Ohh! Something gone wrong. \u{1f625}",buttons:["OK"]});console.log("problemo"),yield t.present()}})),t=>Object(n.a)(this,void 0,void 0,(function*(){const t=yield this.alert.create({message:"Ohh! Something gone wrong. \u{1f625}",buttons:["OK"]});yield t.present()})))}getCounters(t){this._userService.getCounters(t).subscribe(t=>{this.stats=t},t=>Object(n.a)(this,void 0,void 0,(function*(){const t=yield this.alert.create({message:"Ohh! Something gone wrong. \u{1f625}",buttons:["OK"]});yield t.present()})))}followUser(t){var e=new o.a("",this.identity._id,t);this._followUser.addFollow(this.token,e).subscribe(t=>{this.following=!0},t=>Object(n.a)(this,void 0,void 0,(function*(){const t=yield this.alert.create({message:"Ohh! Something gone wrong. \u{1f625}",buttons:["OK"]});yield t.present()})))}unfollowUser(t){this._followUser.deleteFollow(this.token,t).subscribe(t=>{this.following=!1},t=>Object(n.a)(this,void 0,void 0,(function*(){const t=yield this.alert.create({message:"Ohh! Something gone wrong. \u{1f625}",buttons:["OK"]});yield t.present()})))}mouseEnter(t){this.followUserOver=t}mouseLeave(){this.followUserOver=0}goBack(){this.modal.dismiss()}getPublications(t,e=!1){return Object(n.a)(this,void 0,void 0,(function*(){const i=yield this.loading.create();i.present(),this._publicationService.getPublicationsUser(this.token,this.user._id,t).subscribe(t=>{if(t.publications)if(this.coords=[],this.total=t.total_items,this.pages=t.pages,this.items_per_page=t.items_per_page,e){this.publications=this.publications.concat(t.publications),console.log(this.publications);for(let t=0;t<this.publications.length;t++){let e=this.publications[t].location.split(","),i=this.publications[t].date.split(","),n={date:i[0],hour:i[1]};this.coords.push({lat:e[0],lng:e[1],zoom:15}),this.times.push(n)}setTimeout(()=>{this.initialize(),i.dismiss()},3e3)}else{this.publications=t.publications;for(let t=0;t<this.publications.length;t++){let e=this.publications[t].location.split(","),i=this.publications[t].date.split(","),n={date:i[0],hour:i[1].substr(12).slice(0,5)};this.coords.push({lat:e[0],lng:e[1],zoom:15}),this.times.push(n)}setTimeout(()=>{this.initialize(),i.dismiss()},3e3)}else i.dismiss()},t=>Object(n.a)(this,void 0,void 0,(function*(){const t=yield this.alert.create({message:"Ohh! Something gone wrong. \u{1f625}",buttons:["OK"]});i.dismiss(),yield t.present()})))}))}delete(t){this._publicationService.deletePublication(this.token,t).subscribe(t=>{console.log("bien")},t=>Object(n.a)(this,void 0,void 0,(function*(){const t=yield this.alert.create({message:"Ohh! Something gone wrong. \u{1f625}",buttons:["OK"]});yield t.present()})))}initialize(){for(var t=0,e=this.coords.length;t<e;t++){var i=this.coords[t],n=new google.maps.LatLng(i.lat,i.lng);this.maps[t]=new google.maps.Map(document.getElementById("map"+t),{zoom:i.zoom,center:n,zoomControl:!1,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1,gestureHandling:"none"}),this.markers[t]=new google.maps.Marker({position:n,map:this.maps[t]})}console.log(this.maps,this.markers)}doInfinite(t){this.publications.length==this.total?t.target.complete():(this.page++,this.getPublications(this.page,!0).then(e=>t.target.complete()))}doRefresh(t){this.page=1,this.getPublications(this.page,!1).then(e=>t.target.complete())}openPublication(t){return Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.modalController.create({component:a.a,componentProps:{publication:t}});return yield e.present()}))}goUser(t){return Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.modalController.create({component:b.a,componentProps:{user:t}});return yield e.present()}))}like(t){this.identity=this._userService.getIdentity(),this._publicationService.like(this.token,t).subscribe(e=>Object(n.a)(this,void 0,void 0,(function*(){if(e)for(let e=0;e<this.publications.length;e++)this.publications[e]._id==t._id&&this.publications[e].like.push(this.identity._id);else{const t=yield this.alert.create({message:"Ohh! Something gone wrong. \u{1f625}",buttons:["OK"]});yield t.present()}})),t=>Object(n.a)(this,void 0,void 0,(function*(){const t=yield this.alert.create({message:"Ohh! Something gone wrong. \u{1f625}",buttons:["OK"]});yield t.present()})))}dislike(t){this.identity=this._userService.getIdentity(),this._publicationService.dislike(this.token,t).subscribe(e=>Object(n.a)(this,void 0,void 0,(function*(){if(e){for(let e=0;e<this.publications.length;e++)if(this.publications[e]._id==t._id){var i=this.publications[e].like.indexOf(this.identity._id);this.publications[e].like.splice(i,1)}}else{const t=yield this.alert.create({message:"Ohh! Something gone wrong. \u{1f625}",buttons:["OK"]});yield t.present()}})),t=>Object(n.a)(this,void 0,void 0,(function*(){const t=yield this.alert.create({message:"Ohh! Something gone wrong. \u{1f625}",buttons:["OK"]});yield t.present()})))}checkIfExists(t){return!!t.like.includes(this.identity._id)}}return t.\u0275fac=function(e){return new(e||t)(u.Jb(h.P),u.Jb(h.N),u.Jb(r.a),u.Jb(l.a),u.Jb(h.N),u.Jb(g.a),u.Jb(g.g),u.Jb(s.a),u.Jb(c.a),u.Jb(h.a),u.Jb(h.L),u.Jb(h.O))},t.\u0275cmp=u.Db({type:t,selectors:[["app-profile"]],features:[u.yb([s.a,c.a,l.a])],decls:15,vars:2,consts:[["color","success"],["slot","start"],[3,"click"],["name","chevron-back-outline"],["slot","fixed","pullFactor","0.5","pullMin","100","pullMax","200",3,"ionRefresh"],[4,"ngIf"],["threshold","100px",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading more data..."],[3,"src","click",4,"ngIf"],["src","../../assets/no-user.webp",3,"click",4,"ngIf"],["color","light",4,"ngIf"],["color","success",3,"click",4,"ngIf"],["color","primary",3,"color","click","mouseenter","mouseleave",4,"ngIf"],[3,"src","click"],["src","../../assets/no-user.webp",3,"click"],["color","light"],["color","success",3,"click"],["color","primary",3,"color","click","mouseenter","mouseleave"],[4,"ngIf","ngIfElse"],["following",""],["id","container",4,"ngFor","ngForOf"],["id","container-no-exits",4,"ngIf"],["id","container"],[3,"src",4,"ngIf"],["src","../../assets/no-user.webp",4,"ngIf"],[2,"max-width","500px","height","300px",3,"id"],[3,"click",4,"ngIf"],["color","warning",3,"click",4,"ngIf"],[3,"src"],["src","../../assets/no-user.webp"],["color","warning",3,"click"],["id","container-no-exits"]],template:function(t,e){1&t&&(u.Mb(0,"ion-header"),u.Mb(1,"ion-toolbar",0),u.Mb(2,"ion-buttons",1),u.Mb(3,"ion-button",2),u.Ub("click",(function(){return e.goBack()})),u.Kb(4,"ion-icon",3),u.kc(5,"Back "),u.Lb(),u.Lb(),u.Mb(6,"ion-title"),u.kc(7,"Profile"),u.Lb(),u.Lb(),u.Lb(),u.Mb(8,"ion-content"),u.Mb(9,"ion-refresher",4),u.Ub("ionRefresh",(function(t){return e.doRefresh(t)})),u.Kb(10,"ion-refresher-content"),u.Lb(),u.ic(11,L,12,7,"ion-item",5),u.ic(12,C,3,2,"div",5),u.Mb(13,"ion-infinite-scroll",6),u.Ub("ionInfinite",(function(t){return e.doInfinite(t)})),u.Kb(14,"ion-infinite-scroll-content",7),u.Lb(),u.Lb()),2&t&&(u.zb(11),u.bc("ngIf",e.user),u.zb(1),u.bc("ngIf",e.publications))},directives:[h.o,h.I,h.e,h.d,h.p,h.H,h.j,h.A,h.B,d.j,h.q,h.r,h.t,h.c,h.u,d.i,h.f,h.g,h.n,h.D,h.i],pipes:[d.d],styles:["#container[_ngcontent-%COMP%]{max-width:500px;margin:auto}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}#container-no-exits[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container-no-exits[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container-no-exits[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}"]}),t})()},wzbf:function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var n=i("tk/3"),o=i("fXoL"),s=i("TEn/");let c=(()=>{class t{constructor(t,e,i){this._http=t,this.alert=e,this.loading=i,this.url="https://api-meet-sport.herokuapp.com/api"}addPublication(t,e){let i=JSON.stringify(e),o=(new n.c).set("Content-Type","application/json").set("Authorization",t);return this._http.post(this.url+"/publication",i,{headers:o})}getPublications(t,e=1){let i=(new n.c).set("Content-Type","application/json").set("Authorization",t);return this._http.get(this.url+"/publications/"+e,{headers:i})}getPublicationsUser(t,e,i=1){console.log(e);let o=(new n.c).set("Content-Type","application/json").set("Authorization",t);return this._http.get(this.url+"/publications-user/"+e+"/"+i,{headers:o})}deletePublication(t,e){let i=(new n.c).set("Content-Type","application/json").set("Authorization",t);return this._http.delete(this.url+"/publication/"+e,{headers:i})}like(t,e){let i=JSON.stringify(e);console.log(e);let o=(new n.c).set("Content-Type","application/json").set("Authorization",t);return this._http.post(this.url+"/like/"+e._id,i,{headers:o})}dislike(t,e){let i=JSON.stringify(e);console.log(e);let o=(new n.c).set("Content-Type","application/json").set("Authorization",t);return this._http.post(this.url+"/dislike/"+e._id,i,{headers:o})}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(n.a),o.Qb(s.a),o.Qb(s.L))},t.\u0275prov=o.Fb({token:t,factory:t.\u0275fac}),t})()}}]);