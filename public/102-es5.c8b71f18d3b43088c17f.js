function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[102],{X3zk:function(e,t,n){"use strict";n.r(t),n.d(t,"LoginPageModule",(function(){return v}));var r=n("ofXK"),i=n("3Pt+"),o=n("TEn/"),s=n("tyNb"),a=n("mrSG"),c=n("2hxB"),u=n("qfBg"),l=n("fXoL");function g(e,t){1&e&&(l.Mb(0,"span"),l.kc(1,"The email is incorrect"),l.Lb())}function b(e,t){1&e&&(l.Mb(0,"span"),l.kc(1,"Password is required"),l.Lb())}var h,p,f,d=[{path:"",component:(h=function(){function e(t,n,r,i,o,s,a){_classCallCheck(this,e),this._router=t,this._route_=n,this._userService=r,this.alert=i,this.loading=o,this.navCtrl=s,this.menuCtrl=a,this.user=new c.a("","","","","","","ROLE_USER","")}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ionViewWillEnter",value:function(){this.menuCtrl.enable(!1)}},{key:"onSubmit",value:function(){return Object(a.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.loading.create({message:"Please wait..."}),e.next=3,t;case 3:e.sent.present(),this._userService.signup(this.user).subscribe((function(e){return Object(a.a)(n,void 0,void 0,regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.identity=e.user,!this.identity||!this.identity._id){n.next=8;break}return localStorage.setItem("identity",JSON.stringify(this.identity)),this.getToken(),n.next=5,t;case 5:n.sent.dismiss(),n.next=16;break;case 8:return n.next=10,this.alert.create({message:"Ohh! Something gone wrong. \ud83d\ude25",buttons:["OK"]});case 10:return r=n.sent,n.next=13,t;case 13:return n.sent.dismiss(),n.next=16,r.present();case 16:case"end":return n.stop()}}),n,this)})))}),(function(e){return Object(a.a)(n,void 0,void 0,regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null==e){n.next=9;break}return n.next=3,this.alert.create({message:"Ohh! Something gone wrong. \ud83d\ude25",buttons:["OK"]});case 3:return r=n.sent,n.next=6,t;case 6:return n.sent.dismiss(),n.next=9,r.present();case 9:case"end":return n.stop()}}),n,this)})))}));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"getToken",value:function(){var e=this;this._userService.signup(this.user,"true").subscribe((function(t){return Object(a.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.token=t.token,!(this.token.length<=0)){e.next=8;break}return e.next=3,this.alert.create({message:"Ohh! Something gone wrong. \ud83d\ude25",buttons:["OK"]});case 3:return n=e.sent,e.next=6,n.present();case 6:e.next=9;break;case 8:localStorage.setItem("token",this.token),this.navCtrl.pop(),this.getCounters(),this.navCtrl.navigateRoot("/");case 9:case"end":return e.stop()}}),e,this)})))}),(function(t){return Object(a.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t){e.next=6;break}return e.next=3,this.alert.create({message:"Ohh! Something gone wrong. \ud83d\ude25",buttons:["OK"]});case 3:return n=e.sent,e.next=6,n.present();case 6:case"end":return e.stop()}}),e,this)})))}))}},{key:"getCounters",value:function(){this._userService.getCounters().subscribe((function(e){localStorage.setItem("stats",JSON.stringify(e)),console.log(e)}),(function(e){console.log(e)}))}}]),e}(),h.\u0275fac=function(e){return new(e||h)(l.Jb(s.g),l.Jb(s.a),l.Jb(u.a),l.Jb(o.a),l.Jb(o.L),l.Jb(o.O),l.Jb(o.M))},h.\u0275cmp=l.Db({type:h,selectors:[["app-login"]],features:[l.yb([u.a])],decls:21,vars:4,consts:[["color","success"],["no-bounce","",1,"login"],["padding","",1,"login-box"],["src","../../assets/logo.PNG","alt","",1,"if-logo"],["novalidate","",3,"ngSubmit"],["loginForm","ngForm"],["clearInput","false","placeholder","Email","name","email","type","email","spellcheck","false","autocapitalize","off","required","","pattern","[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$",1,"code",3,"ngModel","ngModelChange"],["email","ngModel"],[4,"ngIf"],["clearInput","false","placeholder","Password","name","password","type","password","spellcheck","false","autocapitalize","off","required","",1,"code",3,"ngModel","ngModelChange"],["password","ngModel"],["type","submit","color","primary","block","",1,"login-button"],["routerLink","../register","color","primary","block","",1,"login-register"]],template:function(e,t){if(1&e&&(l.Mb(0,"ion-header"),l.Mb(1,"ion-toolbar",0),l.Mb(2,"ion-title"),l.kc(3,"Login"),l.Lb(),l.Lb(),l.Lb(),l.Mb(4,"ion-content",1),l.Mb(5,"ion-card",2),l.Kb(6,"img",3),l.Mb(7,"form",4,5),l.Ub("ngSubmit",(function(){return t.onSubmit()})),l.Mb(9,"ion-item"),l.Mb(10,"ion-input",6,7),l.Ub("ngModelChange",(function(e){return t.user.email=e})),l.Lb(),l.ic(12,g,2,0,"span",8),l.Lb(),l.Mb(13,"ion-item"),l.Mb(14,"ion-input",9,10),l.Ub("ngModelChange",(function(e){return t.user.password=e})),l.Lb(),l.ic(16,b,2,0,"span",8),l.Lb(),l.Mb(17,"ion-button",11),l.kc(18," Login "),l.Lb(),l.Mb(19,"ion-button",12),l.kc(20," Register "),l.Lb(),l.Lb(),l.Lb(),l.Lb()),2&e){var n=l.ec(11);l.zb(10),l.bc("ngModel",t.user.email),l.zb(2),l.bc("ngIf",!n.valid&&n.touched),l.zb(2),l.bc("ngModel",t.user.password),l.zb(2),l.bc("ngIf",!n.valid&&n.touched)}},directives:[o.o,o.I,o.H,o.j,o.f,i.i,i.d,i.e,o.t,o.s,o.T,i.h,i.g,i.c,i.f,r.j,o.d,o.R,s.h],styles:[".login-box[_ngcontent-%COMP%]{max-width:350px;margin:40px auto 0}.logo[_ngcontent-%COMP%]{margin:0 auto;height:30px}.if-logo[_ngcontent-%COMP%]{height:200px;margin-left:22%}.RP-Icon[_ngcontent-%COMP%]{width:100%;height:66px;bottom:90px;margin:50px auto 0 -2px}.login-button[_ngcontent-%COMP%]{width:90%;margin:20px auto 20px 5%}.login-register[_ngcontent-%COMP%]{width:90%;margin:0 auto 20px 5%}.code[_ngcontent-%COMP%]{margin-top:1vw;border-bottom:1px solid #ddd;padding:10px;color:#888}.app-version[_ngcontent-%COMP%]{color:#fff;font-size:18px;font-weight:300;text-align:center;margin-top:90px}"]}),h)}],m=((f=function e(){_classCallCheck(this,e)}).\u0275mod=l.Hb({type:f}),f.\u0275inj=l.Gb({factory:function(e){return new(e||f)},imports:[[s.i.forChild(d)],s.i]}),f),v=((p=function e(){_classCallCheck(this,e)}).\u0275mod=l.Hb({type:p}),p.\u0275inj=l.Gb({factory:function(e){return new(e||p)},imports:[[r.b,i.a,o.J,m]]}),p)}}]);